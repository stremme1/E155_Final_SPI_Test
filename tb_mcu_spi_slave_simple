#! /opt/homebrew/Cellar/icarus-verilog/12.0/bin/vvp
:ivl_version "12.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/system.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/vhdl_sys.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/vhdl_textio.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/v2005_math.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/va_math.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/v2009.vpi";
S_0x14b640760 .scope package, "$unit" "$unit" 2 1;
 .timescale 0 0;
S_0x14b646900 .scope module, "tb_mcu_spi_slave_simple" "tb_mcu_spi_slave_simple" 3 7;
 .timescale -9 -12;
P_0x14b636600 .param/l "CLK_PERIOD" 0 3 25, +C4<00000000000000000000000101001101>;
L_0x150088010 .functor BUFT 1, C4<10101010>, C4<0>, C4<0>, C4<0>;
L_0x14b665870 .functor BUFZ 8, L_0x150088010, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b6658e0 .functor BUFZ 8, L_0x14b6646b0, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b665990 .functor BUFZ 8, L_0x14b664790, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b665a40 .functor BUFZ 8, L_0x14b664830, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b665af0 .functor BUFZ 8, L_0x14b664910, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b665ba0 .functor BUFZ 8, L_0x14b6649b0, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b665c50 .functor BUFZ 8, L_0x14b664ab0, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b665d40 .functor BUFZ 8, L_0x14b664b50, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b665df0 .functor BUFZ 8, L_0x14b664c30, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b665eb0 .functor BUFZ 8, L_0x14b664cd0, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b665f20 .functor BUFZ 8, L_0x14b664dd0, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b666030 .functor BUFZ 8, L_0x14b664e70, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b6660a0 .functor BUFZ 8, L_0x14b664fb0, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b6661c0 .functor BUFZ 8, L_0x14b665050, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b666230 .functor BUFZ 8, L_0x14b665160, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x14b666150 .functor BUFZ 8, L_0x14b665200, C4<00000000>, C4<00000000>, C4<00000000>;
v0x14b6637c0_0 .var "clk", 0 0;
v0x14b663850_0 .net "done", 0 0, v0x14b662370_0;  1 drivers
v0x14b6638e0_0 .var/i "fail_count", 31 0;
v0x14b663970_0 .var "gyro1_valid", 0 0;
v0x14b663a00_0 .var/s "gyro1_x", 15 0;
v0x14b663ad0_0 .var/s "gyro1_y", 15 0;
v0x14b663b80_0 .var/s "gyro1_z", 15 0;
v0x14b663c30_0 .var "load", 0 0;
v0x14b663ce0 .array "packet_buffer", 15 0;
v0x14b663ce0_0 .net v0x14b663ce0 0, 7 0, L_0x14b665870; 1 drivers
v0x14b663ce0_1 .net v0x14b663ce0 1, 7 0, L_0x14b6658e0; 1 drivers
v0x14b663ce0_2 .net v0x14b663ce0 2, 7 0, L_0x14b665990; 1 drivers
v0x14b663ce0_3 .net v0x14b663ce0 3, 7 0, L_0x14b665a40; 1 drivers
v0x14b663ce0_4 .net v0x14b663ce0 4, 7 0, L_0x14b665af0; 1 drivers
v0x14b663ce0_5 .net v0x14b663ce0 5, 7 0, L_0x14b665ba0; 1 drivers
v0x14b663ce0_6 .net v0x14b663ce0 6, 7 0, L_0x14b665c50; 1 drivers
v0x14b663ce0_7 .net v0x14b663ce0 7, 7 0, L_0x14b665d40; 1 drivers
v0x14b663ce0_8 .net v0x14b663ce0 8, 7 0, L_0x14b665df0; 1 drivers
v0x14b663ce0_9 .net v0x14b663ce0 9, 7 0, L_0x14b665eb0; 1 drivers
v0x14b663ce0_10 .net v0x14b663ce0 10, 7 0, L_0x14b665f20; 1 drivers
v0x14b663ce0_11 .net v0x14b663ce0 11, 7 0, L_0x14b666030; 1 drivers
v0x14b663ce0_12 .net v0x14b663ce0 12, 7 0, L_0x14b6660a0; 1 drivers
v0x14b663ce0_13 .net v0x14b663ce0 13, 7 0, L_0x14b6661c0; 1 drivers
v0x14b663ce0_14 .net v0x14b663ce0 14, 7 0, L_0x14b666230; 1 drivers
v0x14b663ce0_15 .net v0x14b663ce0 15, 7 0, L_0x14b666150; 1 drivers
v0x14b663f50_0 .var/i "pass_count", 31 0;
v0x14b664000_0 .var "quat1_valid", 0 0;
v0x14b6640b0_0 .var/s "quat1_w", 15 0;
v0x14b664140_0 .var/s "quat1_x", 15 0;
v0x14b6641d0_0 .var/s "quat1_y", 15 0;
v0x14b664280_0 .var/s "quat1_z", 15 0;
v0x14b664330_0 .var "sck", 0 0;
v0x14b6643e0_0 .var "sdi", 0 0;
v0x14b664590_0 .net "sdo", 0 0, L_0x14b665790;  1 drivers
v0x14b664620_0 .var/i "test_count", 31 0;
S_0x14b646200 .scope task, "check_test" "check_test" 3 77, 3 77 0, S_0x14b646900;
 .timescale -9 -12;
v0x14b64f510_0 .var "condition", 0 0;
v0x14b661950_0 .var/str "test_name";
TD_tb_mcu_spi_slave_simple.check_test ;
    %load/vec4 v0x14b664620_0;
    %addi 1, 0, 32;
    %store/vec4 v0x14b664620_0, 0, 32;
    %load/vec4 v0x14b64f510_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_0.0, 8;
    %vpi_call/w 3 80 "$display", "[PASS] %s", v0x14b661950_0 {0 0 0};
    %load/vec4 v0x14b663f50_0;
    %addi 1, 0, 32;
    %store/vec4 v0x14b663f50_0, 0, 32;
    %jmp T_0.1;
T_0.0 ;
    %vpi_call/w 3 83 "$display", "[FAIL] %s", v0x14b661950_0 {0 0 0};
    %load/vec4 v0x14b6638e0_0;
    %addi 1, 0, 32;
    %store/vec4 v0x14b6638e0_0, 0, 32;
T_0.1 ;
    %end;
S_0x14b6619f0 .scope module, "dut" "mcu_spi_slave" 3 34, 4 9 0, S_0x14b646900;
 .timescale -9 -12;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "sck";
    .port_info 2 /INPUT 1 "sdi";
    .port_info 3 /OUTPUT 1 "sdo";
    .port_info 4 /INPUT 1 "load";
    .port_info 5 /OUTPUT 1 "done";
    .port_info 6 /INPUT 1 "quat1_valid";
    .port_info 7 /INPUT 16 "quat1_w";
    .port_info 8 /INPUT 16 "quat1_x";
    .port_info 9 /INPUT 16 "quat1_y";
    .port_info 10 /INPUT 16 "quat1_z";
    .port_info 11 /INPUT 1 "gyro1_valid";
    .port_info 12 /INPUT 16 "gyro1_x";
    .port_info 13 /INPUT 16 "gyro1_y";
    .port_info 14 /INPUT 16 "gyro1_z";
P_0x14b661bb0 .param/l "HEADER_BYTE" 1 4 32, C4<10101010>;
P_0x14b661bf0 .param/l "PACKET_SIZE" 1 4 31, +C4<00000000000000000000000000010000>;
L_0x14b6650f0 .functor OR 1, v0x14b664000_0, v0x14b663970_0, C4<0>, C4<0>;
L_0x14b665510 .functor AND 1, v0x14b662370_0, L_0x14b665450, C4<1>, C4<1>;
L_0x150088058 .functor BUFT 1, C4<000000>, C4<0>, C4<0>, C4<0>;
v0x14b661fc0_0 .net/2u *"_ivl_46", 5 0, L_0x150088058;  1 drivers
v0x14b662080_0 .net *"_ivl_55", 0 0, L_0x14b665450;  1 drivers
v0x14b662120_0 .net *"_ivl_56", 0 0, L_0x14b665510;  1 drivers
v0x14b6621e0_0 .net *"_ivl_60", 0 0, L_0x14b665600;  1 drivers
v0x14b662290_0 .net "clk", 0 0, v0x14b6637c0_0;  1 drivers
v0x14b662370_0 .var "data_ready_reg", 0 0;
v0x14b662410_0 .net "done", 0 0, v0x14b662370_0;  alias, 1 drivers
v0x14b6624b0_0 .net "gyro1_valid", 0 0, v0x14b663970_0;  1 drivers
v0x14b662550_0 .net/s "gyro1_x", 15 0, v0x14b663a00_0;  1 drivers
v0x14b662660_0 .net/s "gyro1_y", 15 0, v0x14b663ad0_0;  1 drivers
v0x14b662710_0 .net/s "gyro1_z", 15 0, v0x14b663b80_0;  1 drivers
v0x14b6627c0_0 .net "has_valid", 0 0, L_0x14b6650f0;  1 drivers
v0x14b662860_0 .var "has_valid_prev", 0 0;
v0x14b662900_0 .var "has_valid_prev_reg", 0 0;
v0x14b6629a0_0 .net "load", 0 0, v0x14b663c30_0;  1 drivers
v0x14b662a40_0 .var "load_prev", 0 0;
v0x14b662ae0 .array "packet_buffer", 15 0;
v0x14b662ae0_0 .net v0x14b662ae0 0, 7 0, L_0x150088010; 1 drivers
v0x14b662ae0_1 .net v0x14b662ae0 1, 7 0, L_0x14b6646b0; 1 drivers
v0x14b662ae0_2 .net v0x14b662ae0 2, 7 0, L_0x14b664790; 1 drivers
v0x14b662ae0_3 .net v0x14b662ae0 3, 7 0, L_0x14b664830; 1 drivers
v0x14b662ae0_4 .net v0x14b662ae0 4, 7 0, L_0x14b664910; 1 drivers
v0x14b662ae0_5 .net v0x14b662ae0 5, 7 0, L_0x14b6649b0; 1 drivers
v0x14b662ae0_6 .net v0x14b662ae0 6, 7 0, L_0x14b664ab0; 1 drivers
v0x14b662ae0_7 .net v0x14b662ae0 7, 7 0, L_0x14b664b50; 1 drivers
v0x14b662ae0_8 .net v0x14b662ae0 8, 7 0, L_0x14b664c30; 1 drivers
v0x14b662ae0_9 .net v0x14b662ae0 9, 7 0, L_0x14b664cd0; 1 drivers
v0x14b662ae0_10 .net v0x14b662ae0 10, 7 0, L_0x14b664dd0; 1 drivers
v0x14b662ae0_11 .net v0x14b662ae0 11, 7 0, L_0x14b664e70; 1 drivers
v0x14b662ae0_12 .net v0x14b662ae0 12, 7 0, L_0x14b664fb0; 1 drivers
v0x14b662ae0_13 .net v0x14b662ae0 13, 7 0, L_0x14b665050; 1 drivers
v0x14b662ae0_14 .net v0x14b662ae0 14, 7 0, L_0x14b665160; 1 drivers
v0x14b662ae0_15 .net v0x14b662ae0 15, 7 0, L_0x14b665200; 1 drivers
v0x14b662d40_0 .var "packet_shift_reg", 127 0;
v0x14b662df0_0 .net "quat1_valid", 0 0, v0x14b664000_0;  1 drivers
v0x14b662e90_0 .net/s "quat1_w", 15 0, v0x14b6640b0_0;  1 drivers
v0x14b662f40_0 .net/s "quat1_x", 15 0, v0x14b664140_0;  1 drivers
v0x14b662ff0_0 .net/s "quat1_y", 15 0, v0x14b6641d0_0;  1 drivers
v0x14b6630a0_0 .net/s "quat1_z", 15 0, v0x14b664280_0;  1 drivers
v0x14b663150_0 .net "sck", 0 0, v0x14b664330_0;  1 drivers
v0x14b6631f0_0 .net "sdi", 0 0, v0x14b6643e0_0;  1 drivers
v0x14b663290_0 .net "sdo", 0 0, L_0x14b665790;  alias, 1 drivers
v0x14b663330_0 .var "sdodelayed", 0 0;
v0x14b6633d0_0 .var "wasdone", 0 0;
E_0x14b661ec0 .event negedge, v0x14b663150_0;
E_0x14b661f10 .event posedge, v0x14b663150_0;
E_0x14b661f60 .event posedge, v0x14b662290_0;
L_0x14b6646b0 .part v0x14b6640b0_0, 8, 8;
L_0x14b664790 .part v0x14b6640b0_0, 0, 8;
L_0x14b664830 .part v0x14b664140_0, 8, 8;
L_0x14b664910 .part v0x14b664140_0, 0, 8;
L_0x14b6649b0 .part v0x14b6641d0_0, 8, 8;
L_0x14b664ab0 .part v0x14b6641d0_0, 0, 8;
L_0x14b664b50 .part v0x14b664280_0, 8, 8;
L_0x14b664c30 .part v0x14b664280_0, 0, 8;
L_0x14b664cd0 .part v0x14b663a00_0, 8, 8;
L_0x14b664dd0 .part v0x14b663a00_0, 0, 8;
L_0x14b664e70 .part v0x14b663ad0_0, 8, 8;
L_0x14b664fb0 .part v0x14b663ad0_0, 0, 8;
L_0x14b665050 .part v0x14b663b80_0, 8, 8;
L_0x14b665160 .part v0x14b663b80_0, 0, 8;
L_0x14b665200 .concat [ 1 1 6 0], v0x14b664000_0, v0x14b663970_0, L_0x150088058;
L_0x14b665450 .reduce/nor v0x14b6633d0_0;
L_0x14b665600 .part L_0x150088010, 7, 1;
L_0x14b665790 .functor MUXZ 1, v0x14b663330_0, L_0x14b665600, L_0x14b665510, C4<>;
S_0x14b6635e0 .scope task, "wait_comb" "wait_comb" 3 89, 3 89 0, S_0x14b646900;
 .timescale -9 -12;
TD_tb_mcu_spi_slave_simple.wait_comb ;
    %delay 666000, 0;
    %end;
    .scope S_0x14b6619f0;
T_2 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b662370_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b662860_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b662900_0, 0, 1;
    %end;
    .thread T_2, $init;
    .scope S_0x14b6619f0;
T_3 ;
    %wait E_0x14b661f60;
    %load/vec4 v0x14b6629a0_0;
    %assign/vec4 v0x14b662a40_0, 0;
    %load/vec4 v0x14b6629a0_0;
    %flag_set/vec4 9;
    %flag_get/vec4 9;
    %jmp/0 T_3.2, 9;
    %load/vec4 v0x14b662a40_0;
    %nor/r;
    %and;
T_3.2;
    %flag_set/vec4 8;
    %jmp/0xz  T_3.0, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x14b662370_0, 0;
    %load/vec4 v0x14b6627c0_0;
    %assign/vec4 v0x14b662860_0, 0;
    %load/vec4 v0x14b662860_0;
    %assign/vec4 v0x14b662900_0, 0;
    %jmp T_3.1;
T_3.0 ;
    %load/vec4 v0x14b6627c0_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_3.3, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x14b662370_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x14b662860_0, 0;
    %load/vec4 v0x14b662860_0;
    %assign/vec4 v0x14b662900_0, 0;
    %jmp T_3.4;
T_3.3 ;
    %load/vec4 v0x14b6627c0_0;
    %flag_set/vec4 9;
    %flag_get/vec4 9;
    %jmp/0 T_3.7, 9;
    %load/vec4 v0x14b662900_0;
    %nor/r;
    %and;
T_3.7;
    %flag_set/vec4 8;
    %jmp/0xz  T_3.5, 8;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x14b662370_0, 0;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x14b662860_0, 0;
    %load/vec4 v0x14b662860_0;
    %assign/vec4 v0x14b662900_0, 0;
    %jmp T_3.6;
T_3.5 ;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x14b662860_0, 0;
    %load/vec4 v0x14b662860_0;
    %assign/vec4 v0x14b662900_0, 0;
T_3.6 ;
T_3.4 ;
T_3.1 ;
    %jmp T_3;
    .thread T_3;
    .scope S_0x14b6619f0;
T_4 ;
    %wait E_0x14b661f10;
    %load/vec4 v0x14b6633d0_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_4.0, 8;
    %ix/load 4, 0, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %ix/load 4, 3, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %ix/load 4, 4, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %ix/load 4, 5, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %ix/load 4, 6, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %ix/load 4, 7, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %ix/load 4, 8, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %ix/load 4, 9, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %ix/load 4, 10, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %ix/load 4, 11, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %ix/load 4, 12, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %ix/load 4, 13, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %ix/load 4, 14, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %ix/load 4, 15, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b662ae0, 4;
    %concat/vec4; draw_concat_vec4
    %load/vec4 v0x14b6631f0_0;
    %concat/vec4; draw_concat_vec4
    %pad/u 128;
    %assign/vec4 v0x14b662d40_0, 0;
    %jmp T_4.1;
T_4.0 ;
    %load/vec4 v0x14b662d40_0;
    %parti/s 127, 0, 2;
    %load/vec4 v0x14b6631f0_0;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x14b662d40_0, 0;
T_4.1 ;
    %jmp T_4;
    .thread T_4;
    .scope S_0x14b6619f0;
T_5 ;
    %wait E_0x14b661ec0;
    %load/vec4 v0x14b662410_0;
    %store/vec4 v0x14b6633d0_0, 0, 1;
    %load/vec4 v0x14b662d40_0;
    %parti/s 1, 126, 8;
    %store/vec4 v0x14b663330_0, 0, 1;
    %jmp T_5;
    .thread T_5;
    .scope S_0x14b646900;
T_6 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b664330_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b6643e0_0, 0, 1;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x14b664620_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x14b663f50_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x14b6638e0_0, 0, 32;
    %end;
    .thread T_6, $init;
    .scope S_0x14b646900;
T_7 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b6637c0_0, 0, 1;
    %delay 166000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b6637c0_0, 0, 1;
    %delay 166000, 0;
    %jmp T_7;
    .thread T_7;
    .scope S_0x14b646900;
T_8 ;
    %vpi_call/w 3 95 "$dumpfile", "tb_mcu_spi_slave_simple.vcd" {0 0 0};
    %vpi_call/w 3 96 "$dumpvars", 32'sb00000000000000000000000000000000, S_0x14b646900 {0 0 0};
    %vpi_call/w 3 98 "$display", "========================================" {0 0 0};
    %vpi_call/w 3 99 "$display", "MCU SPI Slave Simplified Testbench" {0 0 0};
    %vpi_call/w 3 100 "$display", "========================================" {0 0 0};
    %vpi_call/w 3 101 "$display", "\000" {0 0 0};
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b663c30_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b664000_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b663970_0, 0, 1;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b6640b0_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b664140_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b6641d0_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b664280_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b663a00_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b663ad0_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b663b80_0, 0, 16;
    %delay 3330000, 0;
    %vpi_call/w 3 115 "$display", "=== Test 1: Packet Buffer Assembly ===" {0 0 0};
    %pushi/vec4 4660, 0, 16;
    %store/vec4 v0x14b6640b0_0, 0, 16;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 1.1: Header byte = 0xAA";
    %store/str v0x14b661950_0;
    %ix/load 4, 0, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 170, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 4660, 0, 16;
    %store/vec4 v0x14b6640b0_0, 0, 16;
    %pushi/vec4 22136, 0, 16;
    %store/vec4 v0x14b664140_0, 0, 16;
    %pushi/vec4 39612, 0, 16;
    %store/vec4 v0x14b6641d0_0, 0, 16;
    %pushi/vec4 57072, 0, 16;
    %store/vec4 v0x14b664280_0, 0, 16;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 1.2a: Sensor 1 quat W MSB/LSB";
    %store/str v0x14b661950_0;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 18, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.0, 4;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 52, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.0;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/str "Test 1.2b: Sensor 1 quat X MSB/LSB";
    %store/str v0x14b661950_0;
    %ix/load 4, 3, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 86, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.1, 4;
    %ix/load 4, 4, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 120, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.1;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/str "Test 1.2c: Sensor 1 quat Y MSB/LSB";
    %store/str v0x14b661950_0;
    %ix/load 4, 5, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 154, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.2, 4;
    %ix/load 4, 6, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 188, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.2;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/str "Test 1.2d: Sensor 1 quat Z MSB/LSB";
    %store/str v0x14b661950_0;
    %ix/load 4, 7, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 222, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.3, 4;
    %ix/load 4, 8, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 240, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.3;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 4369, 0, 16;
    %store/vec4 v0x14b663a00_0, 0, 16;
    %pushi/vec4 8738, 0, 16;
    %store/vec4 v0x14b663ad0_0, 0, 16;
    %pushi/vec4 13107, 0, 16;
    %store/vec4 v0x14b663b80_0, 0, 16;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 1.3a: Sensor 1 gyro X MSB/LSB";
    %store/str v0x14b661950_0;
    %ix/load 4, 9, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 17, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.4, 4;
    %ix/load 4, 10, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 17, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/str "Test 1.3b: Sensor 1 gyro Y MSB/LSB";
    %store/str v0x14b661950_0;
    %ix/load 4, 11, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 34, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.5, 4;
    %ix/load 4, 12, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 34, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.5;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/str "Test 1.3c: Sensor 1 gyro Z MSB/LSB";
    %store/str v0x14b661950_0;
    %ix/load 4, 13, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 51, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.6, 4;
    %ix/load 4, 14, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 51, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.6;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b664000_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b663970_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 1.4a: Sensor 1 flags - quat valid only";
    %store/str v0x14b661950_0;
    %ix/load 4, 15, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 1, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b664000_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b663970_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 1.4b: Sensor 1 flags - gyro valid only";
    %store/str v0x14b661950_0;
    %ix/load 4, 15, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 2, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b664000_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b663970_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 1.4c: Sensor 1 flags - both valid";
    %store/str v0x14b661950_0;
    %ix/load 4, 15, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 3, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %vpi_call/w 3 166 "$display", "\000" {0 0 0};
    %vpi_call/w 3 171 "$display", "=== Test 2: DONE Signal Assertion ===" {0 0 0};
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b664000_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b663970_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b663c30_0, 0, 1;
    %delay 1665000, 0;
    %pushi/str "Test 2.1: DONE = 0 when no valid data";
    %store/str v0x14b661950_0;
    %load/vec4 v0x14b663850_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b664000_0, 0, 1;
    %delay 1665000, 0;
    %pushi/str "Test 2.2: DONE = 1 when quat1_valid";
    %store/str v0x14b661950_0;
    %load/vec4 v0x14b663850_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b664000_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b663970_0, 0, 1;
    %delay 1665000, 0;
    %pushi/str "Test 2.3: DONE = 1 when gyro1_valid";
    %store/str v0x14b661950_0;
    %load/vec4 v0x14b663850_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b664000_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b663970_0, 0, 1;
    %delay 1665000, 0;
    %pushi/str "Test 2.4: DONE = 1 when both valid";
    %store/str v0x14b661950_0;
    %load/vec4 v0x14b663850_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %vpi_call/w 3 199 "$display", "\000" {0 0 0};
    %vpi_call/w 3 204 "$display", "=== Test 3: LOAD Acknowledgment ===" {0 0 0};
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b664000_0, 0, 1;
    %delay 1665000, 0;
    %pushi/str "Test 3.1: DONE stays high after data valid";
    %store/str v0x14b661950_0;
    %load/vec4 v0x14b663850_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b663c30_0, 0, 1;
    %delay 1665000, 0;
    %pushi/str "Test 3.2: DONE clears when LOAD goes high";
    %store/str v0x14b661950_0;
    %load/vec4 v0x14b663850_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b663c30_0, 0, 1;
    %delay 1665000, 0;
    %pushi/str "Test 3.3: DONE stays low after LOAD cleared";
    %store/str v0x14b661950_0;
    %load/vec4 v0x14b663850_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b664000_0, 0, 1;
    %pushi/vec4 10, 0, 32;
T_8.7 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_8.8, 5;
    %jmp/1 T_8.8, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x14b661f60;
    %jmp T_8.7;
T_8.8 ;
    %pop/vec4 1;
    %load/vec4 v0x14b663850_0;
    %cmpi/ne 0, 0, 1;
    %jmp/0xz  T_8.9, 4;
    %vpi_call/w 3 230 "$display", "  [WARN] DONE should be 0 after quat1_valid goes low, but it's %b", v0x14b663850_0 {0 0 0};
T_8.9 ;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b664000_0, 0, 1;
    %pushi/vec4 10, 0, 32;
T_8.11 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_8.12, 5;
    %jmp/1 T_8.12, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x14b661f60;
    %jmp T_8.11;
T_8.12 ;
    %pop/vec4 1;
    %pushi/str "Test 3.4: New data sets DONE high again";
    %store/str v0x14b661950_0;
    %load/vec4 v0x14b663850_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b663c30_0, 0, 1;
    %delay 666000, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b663c30_0, 0, 1;
    %delay 666000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b663c30_0, 0, 1;
    %delay 666000, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b663c30_0, 0, 1;
    %delay 1665000, 0;
    %pushi/str "Test 3.5: Multiple LOAD pulses handled correctly";
    %store/str v0x14b661950_0;
    %load/vec4 v0x14b663850_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %vpi_call/w 3 251 "$display", "\000" {0 0 0};
    %vpi_call/w 3 256 "$display", "=== Test 4: Edge Cases ===" {0 0 0};
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b6640b0_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b664140_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b6641d0_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b664280_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b663a00_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b663ad0_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b663b80_0, 0, 16;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 4.1: All zeros handled correctly";
    %store/str v0x14b661950_0;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 0, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.15, 4;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 0, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.15;
    %flag_set/vec4 9;
    %flag_get/vec4 9;
    %jmp/0 T_8.14, 9;
    %ix/load 4, 9, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 0, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.14;
    %flag_set/vec4 8;
    %flag_get/vec4 8;
    %jmp/0 T_8.13, 8;
    %ix/load 4, 10, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 0, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.13;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 32767, 0, 16;
    %store/vec4 v0x14b6640b0_0, 0, 16;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 4.2: Max positive value (0x7FFF)";
    %store/str v0x14b661950_0;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 127, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.16, 4;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 255, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.16;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 32768, 0, 16;
    %store/vec4 v0x14b6640b0_0, 0, 16;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 4.3: Max negative value (0x8000)";
    %store/str v0x14b661950_0;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 128, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.17, 4;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 0, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.17;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 65535, 0, 16;
    %store/vec4 v0x14b6640b0_0, 0, 16;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 4.4: Negative value (-1 = 0xFFFF)";
    %store/str v0x14b661950_0;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 255, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.18, 4;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 255, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.18;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b664000_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b663970_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 4.5: Only quat valid flag";
    %store/str v0x14b661950_0;
    %ix/load 4, 15, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 1, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14b664000_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b663970_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 4.6: Only gyro valid flag";
    %store/str v0x14b661950_0;
    %ix/load 4, 15, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 2, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b664000_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14b663970_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 4.7: Both quat and gyro valid flags";
    %store/str v0x14b661950_0;
    %ix/load 4, 15, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 3, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 4369, 0, 16;
    %store/vec4 v0x14b6640b0_0, 0, 16;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/vec4 8738, 0, 16;
    %store/vec4 v0x14b6640b0_0, 0, 16;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/vec4 13107, 0, 16;
    %store/vec4 v0x14b6640b0_0, 0, 16;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 4.8: Rapid data updates handled";
    %store/str v0x14b661950_0;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 51, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.19, 4;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 51, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.19;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %vpi_call/w 3 318 "$display", "\000" {0 0 0};
    %vpi_call/w 3 323 "$display", "=== Test 5: Byte Order Verification ===" {0 0 0};
    %pushi/vec4 4660, 0, 16;
    %store/vec4 v0x14b6640b0_0, 0, 16;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 5.1: 0x1234 \342\206\222 MSB=0x12, LSB=0x34";
    %store/str v0x14b661950_0;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 18, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.20, 4;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 52, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.20;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 43981, 0, 16;
    %store/vec4 v0x14b6640b0_0, 0, 16;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 5.2: 0xABCD \342\206\222 MSB=0xAB, LSB=0xCD";
    %store/str v0x14b661950_0;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 171, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.21, 4;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 205, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.21;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 65535, 0, 16;
    %store/vec4 v0x14b6640b0_0, 0, 16;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 5.3: -1 (0xFFFF) \342\206\222 MSB=0xFF, LSB=0xFF";
    %store/str v0x14b661950_0;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 255, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.22, 4;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 255, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.22;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14b6640b0_0, 0, 16;
    %fork TD_tb_mcu_spi_slave_simple.wait_comb, S_0x14b6635e0;
    %join;
    %pushi/str "Test 5.4: 0x0000 \342\206\222 MSB=0x00, LSB=0x00";
    %store/str v0x14b661950_0;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %cmpi/e 0, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_8.23, 4;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14b663ce0, 4;
    %pushi/vec4 0, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_8.23;
    %store/vec4 v0x14b64f510_0, 0, 1;
    %fork TD_tb_mcu_spi_slave_simple.check_test, S_0x14b646200;
    %join;
    %vpi_call/w 3 349 "$display", "\000" {0 0 0};
    %vpi_call/w 3 354 "$display", "========================================" {0 0 0};
    %vpi_call/w 3 355 "$display", "Test Summary" {0 0 0};
    %vpi_call/w 3 356 "$display", "========================================" {0 0 0};
    %vpi_call/w 3 357 "$display", "Total Tests: %0d", v0x14b664620_0 {0 0 0};
    %vpi_call/w 3 358 "$display", "Passed: %0d", v0x14b663f50_0 {0 0 0};
    %vpi_call/w 3 359 "$display", "Failed: %0d", v0x14b6638e0_0 {0 0 0};
    %vpi_call/w 3 360 "$display", "========================================" {0 0 0};
    %load/vec4 v0x14b6638e0_0;
    %cmpi/e 0, 0, 32;
    %jmp/0xz  T_8.24, 4;
    %vpi_call/w 3 363 "$display", "ALL TESTS PASSED" {0 0 0};
    %jmp T_8.25;
T_8.24 ;
    %vpi_call/w 3 365 "$display", "SOME TESTS FAILED" {0 0 0};
T_8.25 ;
    %vpi_call/w 3 367 "$display", "========================================" {0 0 0};
    %delay 3330000, 0;
    %vpi_call/w 3 370 "$finish" {0 0 0};
    %end;
    .thread T_8;
# The file index is used to find the file name in the following table.
:file_names 5;
    "N/A";
    "<interactive>";
    "-";
    "test/fpga/tb_mcu_spi_slave_simple.sv";
    "fpga/mcu_spi_slave.sv";
