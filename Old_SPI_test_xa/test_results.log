=== Drum SPI Slave Testbench Started ===
Time: 3330000

=== Test 1: Snare Drum (code 0) ===
[6660000] Triggering drum code: 0
[11322000] MCU: DONE signal detected, starting SPI read
[19000000] MCU: Received command: 0x00 (0)
Test 1 PASSED: Snare drum command received correctly

=== Test 2: Kick Drum (code 2) ===
[32320000] Triggering drum code: 2
[36982000] MCU: DONE signal detected, starting SPI read
[44000000] MCU: Received command: 0x00 (0)
ERROR: tb_drum_spi_slave.sv:154: Test 2 failed: Expected 0x02, got 0x00
       Time: 50660000  Scope: tb_drum_spi_slave
Test 2 PASSED: Kick drum command received correctly

=== Test 3: Crash Cymbal (code 5) ===
[57320000] Triggering drum code: 5
[61982000] MCU: DONE signal detected, starting SPI read
[69000000] MCU: Received command: 0x00 (0)
ERROR: tb_drum_spi_slave.sv:164: Test 3 failed: Expected 0x05, got 0x00
       Time: 75660000  Scope: tb_drum_spi_slave
Test 3 PASSED: Crash cymbal command received correctly

=== Test 4: All Drum Codes (0-7) ===
[82320000] Triggering drum code: 0
[86982000] MCU: DONE signal detected, starting SPI read
[94000000] MCU: Received command: 0x00 (0)
Test 4.0 PASSED: Code 0 received correctly
[107320000] Triggering drum code: 1
[111982000] MCU: DONE signal detected, starting SPI read
[119000000] MCU: Received command: 0x00 (0)
ERROR: tb_drum_spi_slave.sv:178: Test 4.1 failed: Expected 0x01, got 0x00
       Time: 125660000  Scope: tb_drum_spi_slave.test4_loop
Test 4.1 PASSED: Code 1 received correctly
[132320000] Triggering drum code: 2
[136982000] MCU: DONE signal detected, starting SPI read
[144000000] MCU: Received command: 0x00 (0)
ERROR: tb_drum_spi_slave.sv:178: Test 4.2 failed: Expected 0x02, got 0x00
       Time: 150660000  Scope: tb_drum_spi_slave.test4_loop
Test 4.2 PASSED: Code 2 received correctly
[157320000] Triggering drum code: 3
[161982000] MCU: DONE signal detected, starting SPI read
[169000000] MCU: Received command: 0x00 (0)
ERROR: tb_drum_spi_slave.sv:178: Test 4.3 failed: Expected 0x03, got 0x00
       Time: 175660000  Scope: tb_drum_spi_slave.test4_loop
Test 4.3 PASSED: Code 3 received correctly
[182320000] Triggering drum code: 4
[186982000] MCU: DONE signal detected, starting SPI read
[194000000] MCU: Received command: 0x00 (0)
ERROR: tb_drum_spi_slave.sv:178: Test 4.4 failed: Expected 0x04, got 0x00
       Time: 200660000  Scope: tb_drum_spi_slave.test4_loop
Test 4.4 PASSED: Code 4 received correctly
[207320000] Triggering drum code: 5
[211982000] MCU: DONE signal detected, starting SPI read
[219000000] MCU: Received command: 0x00 (0)
ERROR: tb_drum_spi_slave.sv:178: Test 4.5 failed: Expected 0x05, got 0x00
       Time: 225660000  Scope: tb_drum_spi_slave.test4_loop
Test 4.5 PASSED: Code 5 received correctly
[232320000] Triggering drum code: 6
[236982000] MCU: DONE signal detected, starting SPI read
[244000000] MCU: Received command: 0x00 (0)
ERROR: tb_drum_spi_slave.sv:178: Test 4.6 failed: Expected 0x06, got 0x00
       Time: 250660000  Scope: tb_drum_spi_slave.test4_loop
Test 4.6 PASSED: Code 6 received correctly
[257320000] Triggering drum code: 7
[261982000] MCU: DONE signal detected, starting SPI read
[269000000] MCU: Received command: 0x00 (0)
ERROR: tb_drum_spi_slave.sv:178: Test 4.7 failed: Expected 0x07, got 0x00
       Time: 275660000  Scope: tb_drum_spi_slave.test4_loop
Test 4.7 PASSED: Code 7 received correctly
Test 4 PASSED: All drum codes transmitted correctly

=== Test 5: Rapid Triggers ===
[288980000] Triggering drum code: 1
[291977000] Triggering drum code: 3
[294974000] Triggering drum code: 6
[296306000] MCU: DONE signal detected, starting SPI read
[304000000] MCU: Received command: 0x00 (0)
ERROR: tb_drum_spi_slave.sv:198: Test 5a failed
       Time: 310660000  Scope: tb_drum_spi_slave
Test 5a PASSED: First rapid trigger received

[313990000] MCU: DONE signal detected, starting SPI read
[321000000] MCU: Received command: 0x00 (0)
ERROR: tb_drum_spi_slave.sv:205: Test 5b failed
       Time: 327660000  Scope: tb_drum_spi_slave
Test 5b PASSED: Second rapid trigger received

[330990000] MCU: DONE signal detected, starting SPI read
[338000000] MCU: Received command: 0x00 (0)
ERROR: tb_drum_spi_slave.sv:212: Test 5c failed
       Time: 344660000  Scope: tb_drum_spi_slave
Test 5c PASSED: Third rapid trigger received


=== All Tests PASSED ===
Time: 344660000
tb_drum_spi_slave.sv:218: $finish called at 377960000 (1ps)
