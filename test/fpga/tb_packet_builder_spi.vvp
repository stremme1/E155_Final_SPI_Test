#! /opt/homebrew/Cellar/icarus-verilog/12.0/bin/vvp
:ivl_version "12.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/system.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/vhdl_sys.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/vhdl_textio.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/v2005_math.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/va_math.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/v2009.vpi";
S_0x12d714460 .scope package, "$unit" "$unit" 2 1;
 .timescale 0 0;
S_0x12d7123a0 .scope module, "tb_packet_builder_spi" "tb_packet_builder_spi" 3 7;
 .timescale -9 -12;
P_0x12d714af0 .param/l "CLK_PERIOD" 0 3 35, +C4<00000000000000000000000101001101>;
P_0x12d714b30 .param/l "SCK_PERIOD" 0 3 44, +C4<00000000000000000000001111101000>;
v0x12d73b180_0 .var "clk", 0 0;
v0x12d73b260_0 .net "gyro1_valid", 0 0, v0x12d736db0_0;  1 drivers
v0x12d73b2f0_0 .net/s "gyro1_x", 15 0, v0x12d736e50_0;  1 drivers
v0x12d73b3c0_0 .net/s "gyro1_y", 15 0, v0x12d736f10_0;  1 drivers
v0x12d73b490_0 .net/s "gyro1_z", 15 0, v0x12d736fc0_0;  1 drivers
v0x12d73b5a0_0 .var "gyro_valid_raw", 0 0;
v0x12d73b630_0 .var/s "gyro_x_raw", 15 0;
v0x12d73b6c0_0 .var/s "gyro_y_raw", 15 0;
v0x12d73b750_0 .var/s "gyro_z_raw", 15 0;
v0x12d73b860_0 .var "mcu_bit_count", 2 0;
v0x12d73b8f0_0 .var "mcu_bit_count_prev", 0 0;
v0x12d73b980_0 .var "mcu_byte_count", 3 0;
v0x12d73ba10_0 .var "mcu_cs_n", 0 0;
v0x12d73baa0 .array "mcu_received_packet", 15 0, 7 0;
v0x12d73bb30_0 .var "mcu_sck", 0 0;
v0x12d73bbe0_0 .var "mcu_sdi", 0 0;
v0x12d73bc90_0 .net "mcu_sdo", 0 0, L_0x12d73de60;  1 drivers
v0x12d73be40_0 .var "mcu_shift_reg", 7 0;
v0x12d73bed0_0 .net "quat1_valid", 0 0, v0x12d7373c0_0;  1 drivers
v0x12d73bf60_0 .net/s "quat1_w", 15 0, v0x12d737460_0;  1 drivers
v0x12d73bff0_0 .net/s "quat1_x", 15 0, v0x12d737510_0;  1 drivers
v0x12d73c0c0_0 .net/s "quat1_y", 15 0, v0x12d7375c0_0;  1 drivers
v0x12d73c190_0 .net/s "quat1_z", 15 0, v0x12d737670_0;  1 drivers
v0x12d73c260_0 .var "quat_valid_raw", 0 0;
v0x12d73c2f0_0 .var/s "quat_w_raw", 15 0;
v0x12d73c380_0 .var/s "quat_x_raw", 15 0;
v0x12d73c410_0 .var/s "quat_y_raw", 15 0;
v0x12d73c4a0_0 .var/s "quat_z_raw", 15 0;
v0x12d73c550_0 .var "rst_n", 0 0;
E_0x12d7084b0 .event anyedge, v0x12d737b40_0;
S_0x12d712200 .scope begin, "$ivl_for_loop0" "$ivl_for_loop0" 3 140, 3 140 0, S_0x12d7123a0;
 .timescale -9 -12;
v0x12d716b40_0 .var/2s "i", 31 0;
S_0x12d735520 .scope begin, "$ivl_for_loop1" "$ivl_for_loop1" 3 262, 3 262 0, S_0x12d7123a0;
 .timescale -9 -12;
v0x12d735950_0 .var/2s "byte_idx", 31 0;
S_0x12d7356f0 .scope begin, "$ivl_for_loop2" "$ivl_for_loop2" 3 263, 3 263 0, S_0x12d735520;
 .timescale -9 -12;
v0x12d7358b0_0 .var/2s "bit_idx", 31 0;
S_0x12d735a10 .scope begin, "$ivl_for_loop3" "$ivl_for_loop3" 3 275, 3 275 0, S_0x12d7123a0;
 .timescale -9 -12;
v0x12d735bf0_0 .var/2s "i", 31 0;
S_0x12d735ca0 .scope begin, "$unm_blk_23" "$unm_blk_23" 3 287, 3 287 0, S_0x12d7123a0;
 .timescale -9 -12;
v0x12d735e60_0 .var "quat_w_received", 15 0;
v0x12d735f20_0 .var "quat_x_received", 15 0;
v0x12d735fd0_0 .var "quat_y_received", 15 0;
v0x12d736090_0 .var "quat_z_received", 15 0;
S_0x12d736140 .scope begin, "$unm_blk_26" "$unm_blk_26" 3 305, 3 305 0, S_0x12d7123a0;
 .timescale -9 -12;
v0x12d736340_0 .var "gyro_x_received", 15 0;
v0x12d736400_0 .var "gyro_y_received", 15 0;
v0x12d7364a0_0 .var "gyro_z_received", 15 0;
S_0x12d736550 .scope begin, "$unm_blk_29" "$unm_blk_29" 3 322, 3 322 0, S_0x12d7123a0;
 .timescale -9 -12;
v0x12d736710_0 .var "gyro_valid_flag", 0 0;
v0x12d7367c0_0 .var "quat_valid_flag", 0 0;
S_0x12d736860 .scope module, "packet_builder_inst" "sensor_packet_builder" 3 67, 4 16 0, S_0x12d7123a0;
 .timescale -9 -12;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "rst_n";
    .port_info 2 /INPUT 1 "quat_valid";
    .port_info 3 /INPUT 16 "quat_w";
    .port_info 4 /INPUT 16 "quat_x";
    .port_info 5 /INPUT 16 "quat_y";
    .port_info 6 /INPUT 16 "quat_z";
    .port_info 7 /INPUT 1 "gyro_valid";
    .port_info 8 /INPUT 16 "gyro_x";
    .port_info 9 /INPUT 16 "gyro_y";
    .port_info 10 /INPUT 16 "gyro_z";
    .port_info 11 /OUTPUT 1 "quat1_valid";
    .port_info 12 /OUTPUT 16 "quat1_w";
    .port_info 13 /OUTPUT 16 "quat1_x";
    .port_info 14 /OUTPUT 16 "quat1_y";
    .port_info 15 /OUTPUT 16 "quat1_z";
    .port_info 16 /OUTPUT 1 "gyro1_valid";
    .port_info 17 /OUTPUT 16 "gyro1_x";
    .port_info 18 /OUTPUT 16 "gyro1_y";
    .port_info 19 /OUTPUT 16 "gyro1_z";
v0x12d736d00_0 .net "clk", 0 0, v0x12d73b180_0;  1 drivers
v0x12d736db0_0 .var "gyro1_valid", 0 0;
v0x12d736e50_0 .var/s "gyro1_x", 15 0;
v0x12d736f10_0 .var/s "gyro1_y", 15 0;
v0x12d736fc0_0 .var/s "gyro1_z", 15 0;
v0x12d7370b0_0 .net "gyro_valid", 0 0, v0x12d73b5a0_0;  1 drivers
v0x12d737150_0 .net/s "gyro_x", 15 0, v0x12d73b630_0;  1 drivers
v0x12d737200_0 .net/s "gyro_y", 15 0, v0x12d73b6c0_0;  1 drivers
v0x12d7372b0_0 .net/s "gyro_z", 15 0, v0x12d73b750_0;  1 drivers
v0x12d7373c0_0 .var "quat1_valid", 0 0;
v0x12d737460_0 .var/s "quat1_w", 15 0;
v0x12d737510_0 .var/s "quat1_x", 15 0;
v0x12d7375c0_0 .var/s "quat1_y", 15 0;
v0x12d737670_0 .var/s "quat1_z", 15 0;
v0x12d737720_0 .net "quat_valid", 0 0, v0x12d73c260_0;  1 drivers
v0x12d7377c0_0 .net/s "quat_w", 15 0, v0x12d73c2f0_0;  1 drivers
v0x12d737870_0 .net/s "quat_x", 15 0, v0x12d73c380_0;  1 drivers
v0x12d737a00_0 .net/s "quat_y", 15 0, v0x12d73c410_0;  1 drivers
v0x12d737a90_0 .net/s "quat_z", 15 0, v0x12d73c4a0_0;  1 drivers
v0x12d737b40_0 .net "rst_n", 0 0, v0x12d73c550_0;  1 drivers
E_0x12d736ca0/0 .event negedge, v0x12d737b40_0;
E_0x12d736ca0/1 .event posedge, v0x12d736d00_0;
E_0x12d736ca0 .event/or E_0x12d736ca0/0, E_0x12d736ca0/1;
S_0x12d737dc0 .scope module, "spi_slave_mcu_inst" "spi_slave_mcu" 3 93, 5 16 0, S_0x12d7123a0;
 .timescale -9 -12;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "cs_n";
    .port_info 2 /INPUT 1 "sck";
    .port_info 3 /INPUT 1 "sdi";
    .port_info 4 /OUTPUT 1 "sdo";
    .port_info 5 /INPUT 1 "quat1_valid";
    .port_info 6 /INPUT 16 "quat1_w";
    .port_info 7 /INPUT 16 "quat1_x";
    .port_info 8 /INPUT 16 "quat1_y";
    .port_info 9 /INPUT 16 "quat1_z";
    .port_info 10 /INPUT 1 "gyro1_valid";
    .port_info 11 /INPUT 16 "gyro1_x";
    .port_info 12 /INPUT 16 "gyro1_y";
    .port_info 13 /INPUT 16 "gyro1_z";
P_0x12d737f30 .param/l "HEADER_BYTE" 1 5 38, C4<10101010>;
P_0x12d737f70 .param/l "PACKET_SIZE" 1 5 37, +C4<00000000000000000000000000010000>;
P_0x12d737fb0 .param/l "TEST_MODE" 1 5 42, C4<0>;
L_0x12d73d140 .functor AND 1, v0x12d738db0_0, L_0x12d73d610, C4<1>, C4<1>;
L_0x12d73dd50 .functor AND 1, v0x12d738d10_0, L_0x12d73dc20, C4<1>, C4<1>;
v0x12d7385d0_0 .net *"_ivl_63", 0 0, L_0x12d73d610;  1 drivers
v0x12d738680_0 .net *"_ivl_85", 0 0, L_0x12d73dc20;  1 drivers
o0x120008a90 .functor BUFZ 1, C4<z>; HiZ drive
; Elide local net with no drivers, v0x12d738720_0 name=_ivl_88
v0x12d7387e0_0 .net *"_ivl_91", 0 0, L_0x12d73ddc0;  1 drivers
v0x12d738890_0 .var "bit_count", 2 0;
v0x12d738980_0 .var "byte_count", 3 0;
v0x12d738a30_0 .net "clk", 0 0, v0x12d73b180_0;  alias, 1 drivers
v0x12d738ac0_0 .net "cs_falling_edge", 0 0, L_0x12d73d140;  1 drivers
v0x12d738b50_0 .net "cs_falling_edge_sck", 0 0, L_0x12d73dd50;  1 drivers
v0x12d738c70_0 .net "cs_n", 0 0, v0x12d73ba10_0;  1 drivers
v0x12d738d10_0 .var "cs_n_prev_sck", 0 0;
v0x12d738db0_0 .var "cs_n_sync1", 0 0;
v0x12d738e50_0 .var "cs_n_sync2", 0 0;
v0x12d738ef0_0 .var "cs_n_sync_sck", 0 0;
v0x12d738f90_0 .var "first_byte_reg", 7 0;
v0x12d739040_0 .net "gyro1_valid", 0 0, v0x12d736db0_0;  alias, 1 drivers
v0x12d7390f0_0 .var "gyro1_valid_clk", 0 0;
v0x12d739280_0 .var "gyro1_valid_latched", 0 0;
v0x12d739310_0 .var "gyro1_valid_snap", 0 0;
v0x12d7393a0_0 .var "gyro1_valid_sync1", 0 0;
v0x12d739430_0 .var "gyro1_valid_sync2", 0 0;
v0x12d7394c0_0 .net/s "gyro1_x", 15 0, v0x12d736e50_0;  alias, 1 drivers
v0x12d739580_0 .var/s "gyro1_x_clk", 15 0;
v0x12d739610_0 .var/s "gyro1_x_snap", 15 0;
v0x12d7396a0_0 .net/s "gyro1_y", 15 0, v0x12d736f10_0;  alias, 1 drivers
v0x12d739730_0 .var/s "gyro1_y_clk", 15 0;
v0x12d7397c0_0 .var/s "gyro1_y_snap", 15 0;
v0x12d739860_0 .net/s "gyro1_z", 15 0, v0x12d736fc0_0;  alias, 1 drivers
v0x12d739920_0 .var/s "gyro1_z_clk", 15 0;
v0x12d7399c0_0 .var/s "gyro1_z_snap", 15 0;
L_0x120040010 .functor BUFT 1, C4<10101010>, C4<0>, C4<0>, C4<0>;
v0x12d739a70 .array "packet_buffer", 15 0;
v0x12d739a70_0 .net v0x12d739a70 0, 7 0, L_0x120040010; 1 drivers
v0x12d739a70_1 .net v0x12d739a70 1, 7 0, L_0x12d73c620; 1 drivers
v0x12d739a70_2 .net v0x12d739a70 2, 7 0, L_0x12d73c700; 1 drivers
v0x12d739a70_3 .net v0x12d739a70 3, 7 0, L_0x12d73c800; 1 drivers
v0x12d739a70_4 .net v0x12d739a70 4, 7 0, L_0x12d73c8c0; 1 drivers
v0x12d739a70_5 .net v0x12d739a70 5, 7 0, L_0x12d73c9c0; 1 drivers
v0x12d739a70_6 .net v0x12d739a70 6, 7 0, L_0x12d73ca90; 1 drivers
v0x12d739a70_7 .net v0x12d739a70 7, 7 0, L_0x12d73cb70; 1 drivers
v0x12d739a70_8 .net v0x12d739a70 8, 7 0, L_0x12d73cc50; 1 drivers
v0x12d739a70_9 .net v0x12d739a70 9, 7 0, L_0x12d73cd50; 1 drivers
v0x12d739a70_10 .net v0x12d739a70 10, 7 0, L_0x12d73ce40; 1 drivers
v0x12d739a70_11 .net v0x12d739a70 11, 7 0, L_0x12d73cee0; 1 drivers
v0x12d739a70_12 .net v0x12d739a70 12, 7 0, L_0x12d73cfe0; 1 drivers
v0x12d739a70_13 .net v0x12d739a70 13, 7 0, L_0x12d73d0a0; 1 drivers
v0x12d739a70_14 .net v0x12d739a70 14, 7 0, L_0x12d73d1b0; 1 drivers
v0x12d739a70_15 .net v0x12d739a70 15, 7 0, L_0x12d73d270; 1 drivers
v0x12d739c90_0 .net "quat1_valid", 0 0, v0x12d7373c0_0;  alias, 1 drivers
v0x12d739d40_0 .var "quat1_valid_clk", 0 0;
v0x12d739180_0 .var "quat1_valid_latched", 0 0;
v0x12d739fd0_0 .var "quat1_valid_snap", 0 0;
v0x12d73a060_0 .var "quat1_valid_sync1", 0 0;
v0x12d73a0f0_0 .var "quat1_valid_sync2", 0 0;
v0x12d73a180_0 .net/s "quat1_w", 15 0, v0x12d737460_0;  alias, 1 drivers
v0x12d73a210_0 .var/s "quat1_w_clk", 15 0;
v0x12d73a2b0_0 .var/s "quat1_w_snap", 15 0;
v0x12d73a360_0 .net/s "quat1_x", 15 0, v0x12d737510_0;  alias, 1 drivers
v0x12d73a420_0 .var/s "quat1_x_clk", 15 0;
v0x12d73a4c0_0 .var/s "quat1_x_snap", 15 0;
v0x12d73a570_0 .net/s "quat1_y", 15 0, v0x12d7375c0_0;  alias, 1 drivers
v0x12d73a630_0 .var/s "quat1_y_clk", 15 0;
v0x12d73a6d0_0 .var/s "quat1_y_snap", 15 0;
v0x12d73a780_0 .net/s "quat1_z", 15 0, v0x12d737670_0;  alias, 1 drivers
v0x12d73a840_0 .var/s "quat1_z_clk", 15 0;
v0x12d73a8e0_0 .var/s "quat1_z_snap", 15 0;
v0x12d73a990_0 .net "sck", 0 0, v0x12d73bb30_0;  1 drivers
v0x12d73aa30_0 .net "sdi", 0 0, v0x12d73bbe0_0;  1 drivers
v0x12d73aad0_0 .net "sdo", 0 0, L_0x12d73de60;  alias, 1 drivers
v0x12d73ab70_0 .var "seen_first_rising", 0 0;
v0x12d73ac10_0 .var "shift_out", 7 0;
v0x12d73acc0_0 .var "snapshot_initialized", 0 0;
L_0x1200400a0 .functor BUFT 1, C4<10101010>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60 .array "test_pattern", 15 0;
v0x12d73ad60_0 .net v0x12d73ad60 0, 7 0, L_0x1200400a0; 1 drivers
L_0x1200400e8 .functor BUFT 1, C4<00010001>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_1 .net v0x12d73ad60 1, 7 0, L_0x1200400e8; 1 drivers
L_0x120040130 .functor BUFT 1, C4<00100010>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_2 .net v0x12d73ad60 2, 7 0, L_0x120040130; 1 drivers
L_0x120040178 .functor BUFT 1, C4<00110011>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_3 .net v0x12d73ad60 3, 7 0, L_0x120040178; 1 drivers
L_0x1200401c0 .functor BUFT 1, C4<01000100>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_4 .net v0x12d73ad60 4, 7 0, L_0x1200401c0; 1 drivers
L_0x120040208 .functor BUFT 1, C4<01010101>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_5 .net v0x12d73ad60 5, 7 0, L_0x120040208; 1 drivers
L_0x120040250 .functor BUFT 1, C4<01100110>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_6 .net v0x12d73ad60 6, 7 0, L_0x120040250; 1 drivers
L_0x120040298 .functor BUFT 1, C4<01110111>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_7 .net v0x12d73ad60 7, 7 0, L_0x120040298; 1 drivers
L_0x1200402e0 .functor BUFT 1, C4<10001000>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_8 .net v0x12d73ad60 8, 7 0, L_0x1200402e0; 1 drivers
L_0x120040328 .functor BUFT 1, C4<10011001>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_9 .net v0x12d73ad60 9, 7 0, L_0x120040328; 1 drivers
L_0x120040370 .functor BUFT 1, C4<10101010>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_10 .net v0x12d73ad60 10, 7 0, L_0x120040370; 1 drivers
L_0x1200403b8 .functor BUFT 1, C4<10111011>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_11 .net v0x12d73ad60 11, 7 0, L_0x1200403b8; 1 drivers
L_0x120040400 .functor BUFT 1, C4<11001100>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_12 .net v0x12d73ad60 12, 7 0, L_0x120040400; 1 drivers
L_0x120040448 .functor BUFT 1, C4<11011101>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_13 .net v0x12d73ad60 13, 7 0, L_0x120040448; 1 drivers
L_0x120040490 .functor BUFT 1, C4<11101110>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_14 .net v0x12d73ad60 14, 7 0, L_0x120040490; 1 drivers
L_0x1200404d8 .functor BUFT 1, C4<11111111>, C4<0>, C4<0>, C4<0>;
v0x12d73ad60_15 .net v0x12d73ad60 15, 7 0, L_0x1200404d8; 1 drivers
v0x12d73af80_0 .net "tx_packet", 127 0, L_0x12d73d770;  1 drivers
E_0x12d738200/0 .event negedge, v0x12d73a990_0;
E_0x12d738200/1 .event posedge, v0x12d738c70_0;
E_0x12d738200 .event/or E_0x12d738200/0, E_0x12d738200/1;
E_0x12d738240 .event posedge, v0x12d738c70_0, v0x12d73a990_0;
E_0x12d738290 .event negedge, v0x12d73a990_0;
E_0x12d7382f0 .event posedge, v0x12d736d00_0;
L_0x12d73c620 .part v0x12d73a2b0_0, 8, 8;
L_0x12d73c700 .part v0x12d73a2b0_0, 0, 8;
L_0x12d73c800 .part v0x12d73a4c0_0, 8, 8;
L_0x12d73c8c0 .part v0x12d73a4c0_0, 0, 8;
L_0x12d73c9c0 .part v0x12d73a6d0_0, 8, 8;
L_0x12d73ca90 .part v0x12d73a6d0_0, 0, 8;
L_0x12d73cb70 .part v0x12d73a8e0_0, 8, 8;
L_0x12d73cc50 .part v0x12d73a8e0_0, 0, 8;
L_0x12d73cd50 .part v0x12d739610_0, 8, 8;
L_0x12d73ce40 .part v0x12d739610_0, 0, 8;
L_0x12d73cee0 .part v0x12d7397c0_0, 8, 8;
L_0x12d73cfe0 .part v0x12d7397c0_0, 0, 8;
L_0x12d73d0a0 .part v0x12d7399c0_0, 8, 8;
L_0x12d73d1b0 .part v0x12d7399c0_0, 0, 8;
L_0x12d73d610 .reduce/nor v0x12d73ba10_0;
LS_0x12d73d770_0_0 .concat [ 8 8 8 8], L_0x12d73d270, L_0x12d73d1b0, L_0x12d73d0a0, L_0x12d73cfe0;
LS_0x12d73d770_0_4 .concat [ 8 8 8 8], L_0x12d73cee0, L_0x12d73ce40, L_0x12d73cd50, L_0x12d73cc50;
LS_0x12d73d770_0_8 .concat [ 8 8 8 8], L_0x12d73cb70, L_0x12d73ca90, L_0x12d73c9c0, L_0x12d73c8c0;
LS_0x12d73d770_0_12 .concat [ 8 8 8 8], L_0x12d73c800, L_0x12d73c700, L_0x12d73c620, L_0x120040010;
L_0x12d73d770 .concat [ 32 32 32 32], LS_0x12d73d770_0_0, LS_0x12d73d770_0_4, LS_0x12d73d770_0_8, LS_0x12d73d770_0_12;
L_0x12d73dc20 .reduce/nor v0x12d738ef0_0;
L_0x12d73ddc0 .part v0x12d73ac10_0, 7, 1;
L_0x12d73de60 .functor MUXZ 1, L_0x12d73ddc0, o0x120008a90, v0x12d73ba10_0, C4<>;
S_0x12d738340 .scope generate, "gen_normal_mode" "gen_normal_mode" 5 177, 5 177 0, S_0x12d737dc0;
 .timescale -9 -12;
L_0x120040058 .functor BUFT 1, C4<000000>, C4<0>, C4<0>, C4<0>;
v0x12d738510_0 .net/2u *"_ivl_32", 5 0, L_0x120040058;  1 drivers
L_0x12d73d270 .concat [ 1 1 6 0], v0x12d739fd0_0, v0x12d739310_0, L_0x120040058;
    .scope S_0x12d736860;
T_0 ;
    %wait E_0x12d736ca0;
    %load/vec4 v0x12d737b40_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_0.0, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x12d7373c0_0, 0;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x12d737460_0, 0;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x12d737510_0, 0;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x12d7375c0_0, 0;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x12d737670_0, 0;
    %jmp T_0.1;
T_0.0 ;
    %load/vec4 v0x12d737720_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_0.2, 8;
    %load/vec4 v0x12d7377c0_0;
    %assign/vec4 v0x12d737460_0, 0;
    %load/vec4 v0x12d737870_0;
    %assign/vec4 v0x12d737510_0, 0;
    %load/vec4 v0x12d737a00_0;
    %assign/vec4 v0x12d7375c0_0, 0;
    %load/vec4 v0x12d737a90_0;
    %assign/vec4 v0x12d737670_0, 0;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x12d7373c0_0, 0;
T_0.2 ;
T_0.1 ;
    %jmp T_0;
    .thread T_0;
    .scope S_0x12d736860;
T_1 ;
    %wait E_0x12d736ca0;
    %load/vec4 v0x12d737b40_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.0, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x12d736db0_0, 0;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x12d736e50_0, 0;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x12d736f10_0, 0;
    %pushi/vec4 0, 0, 16;
    %assign/vec4 v0x12d736fc0_0, 0;
    %jmp T_1.1;
T_1.0 ;
    %load/vec4 v0x12d7370b0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.2, 8;
    %load/vec4 v0x12d737150_0;
    %assign/vec4 v0x12d736e50_0, 0;
    %load/vec4 v0x12d737200_0;
    %assign/vec4 v0x12d736f10_0, 0;
    %load/vec4 v0x12d7372b0_0;
    %assign/vec4 v0x12d736fc0_0, 0;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x12d736db0_0, 0;
T_1.2 ;
T_1.1 ;
    %jmp T_1;
    .thread T_1;
    .scope S_0x12d737dc0;
T_2 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d739180_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d739280_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d73acc0_0, 0, 1;
    %pushi/vec4 170, 0, 8;
    %store/vec4 v0x12d738f90_0, 0, 8;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x12d738ef0_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x12d738d10_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d73ab70_0, 0, 1;
    %end;
    .thread T_2, $init;
    .scope S_0x12d737dc0;
T_3 ;
    %wait E_0x12d7382f0;
    %load/vec4 v0x12d739c90_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_3.0, 8;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x12d739180_0, 0;
T_3.0 ;
    %load/vec4 v0x12d739040_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_3.2, 8;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x12d739280_0, 0;
T_3.2 ;
    %load/vec4 v0x12d739180_0;
    %assign/vec4 v0x12d739d40_0, 0;
    %load/vec4 v0x12d739280_0;
    %assign/vec4 v0x12d7390f0_0, 0;
    %load/vec4 v0x12d73a180_0;
    %assign/vec4 v0x12d73a210_0, 0;
    %load/vec4 v0x12d73a360_0;
    %assign/vec4 v0x12d73a420_0, 0;
    %load/vec4 v0x12d73a570_0;
    %assign/vec4 v0x12d73a630_0, 0;
    %load/vec4 v0x12d73a780_0;
    %assign/vec4 v0x12d73a840_0, 0;
    %load/vec4 v0x12d7394c0_0;
    %assign/vec4 v0x12d739580_0, 0;
    %load/vec4 v0x12d7396a0_0;
    %assign/vec4 v0x12d739730_0, 0;
    %load/vec4 v0x12d739860_0;
    %assign/vec4 v0x12d739920_0, 0;
    %jmp T_3;
    .thread T_3;
    .scope S_0x12d737dc0;
T_4 ;
    %wait E_0x12d7382f0;
    %load/vec4 v0x12d739d40_0;
    %assign/vec4 v0x12d73a060_0, 0;
    %load/vec4 v0x12d73a060_0;
    %assign/vec4 v0x12d73a0f0_0, 0;
    %load/vec4 v0x12d7390f0_0;
    %assign/vec4 v0x12d7393a0_0, 0;
    %load/vec4 v0x12d7393a0_0;
    %assign/vec4 v0x12d739430_0, 0;
    %jmp T_4;
    .thread T_4;
    .scope S_0x12d737dc0;
T_5 ;
    %wait E_0x12d7382f0;
    %load/vec4 v0x12d738c70_0;
    %assign/vec4 v0x12d738db0_0, 0;
    %load/vec4 v0x12d738db0_0;
    %assign/vec4 v0x12d738e50_0, 0;
    %jmp T_5;
    .thread T_5;
    .scope S_0x12d737dc0;
T_6 ;
    %wait E_0x12d7382f0;
    %load/vec4 v0x12d738ac0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_6.0, 8;
    %load/vec4 v0x12d73a210_0;
    %assign/vec4 v0x12d73a2b0_0, 0;
    %load/vec4 v0x12d73a420_0;
    %assign/vec4 v0x12d73a4c0_0, 0;
    %load/vec4 v0x12d73a630_0;
    %assign/vec4 v0x12d73a6d0_0, 0;
    %load/vec4 v0x12d73a840_0;
    %assign/vec4 v0x12d73a8e0_0, 0;
    %load/vec4 v0x12d739580_0;
    %assign/vec4 v0x12d739610_0, 0;
    %load/vec4 v0x12d739730_0;
    %assign/vec4 v0x12d7397c0_0, 0;
    %load/vec4 v0x12d739920_0;
    %assign/vec4 v0x12d7399c0_0, 0;
    %load/vec4 v0x12d73a0f0_0;
    %assign/vec4 v0x12d739fd0_0, 0;
    %load/vec4 v0x12d739430_0;
    %assign/vec4 v0x12d739310_0, 0;
    %jmp T_6.1;
T_6.0 ;
    %load/vec4 v0x12d738c70_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_6.2, 8;
    %load/vec4 v0x12d73a210_0;
    %assign/vec4 v0x12d73a2b0_0, 0;
    %load/vec4 v0x12d73a420_0;
    %assign/vec4 v0x12d73a4c0_0, 0;
    %load/vec4 v0x12d73a630_0;
    %assign/vec4 v0x12d73a6d0_0, 0;
    %load/vec4 v0x12d73a840_0;
    %assign/vec4 v0x12d73a8e0_0, 0;
    %load/vec4 v0x12d739580_0;
    %assign/vec4 v0x12d739610_0, 0;
    %load/vec4 v0x12d739730_0;
    %assign/vec4 v0x12d7397c0_0, 0;
    %load/vec4 v0x12d739920_0;
    %assign/vec4 v0x12d7399c0_0, 0;
    %load/vec4 v0x12d73a0f0_0;
    %assign/vec4 v0x12d739fd0_0, 0;
    %load/vec4 v0x12d739430_0;
    %assign/vec4 v0x12d739310_0, 0;
T_6.2 ;
T_6.1 ;
    %jmp T_6;
    .thread T_6;
    .scope S_0x12d737dc0;
T_7 ;
    %wait E_0x12d7382f0;
    %pushi/vec4 170, 0, 8;
    %assign/vec4 v0x12d738f90_0, 0;
    %jmp T_7;
    .thread T_7;
    .scope S_0x12d737dc0;
T_8 ;
    %wait E_0x12d738290;
    %load/vec4 v0x12d738c70_0;
    %assign/vec4 v0x12d738ef0_0, 0;
    %load/vec4 v0x12d738ef0_0;
    %assign/vec4 v0x12d738d10_0, 0;
    %jmp T_8;
    .thread T_8;
    .scope S_0x12d737dc0;
T_9 ;
    %wait E_0x12d738240;
    %load/vec4 v0x12d738c70_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_9.0, 8;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x12d73ab70_0, 0;
    %jmp T_9.1;
T_9.0 ;
    %load/vec4 v0x12d738c70_0;
    %nor/r;
    %flag_set/vec4 9;
    %flag_get/vec4 9;
    %jmp/0 T_9.4, 9;
    %load/vec4 v0x12d73ab70_0;
    %nor/r;
    %and;
T_9.4;
    %flag_set/vec4 8;
    %jmp/0xz  T_9.2, 8;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x12d73ab70_0, 0;
T_9.2 ;
T_9.1 ;
    %jmp T_9;
    .thread T_9;
    .scope S_0x12d737dc0;
T_10 ;
    %wait E_0x12d738200;
    %load/vec4 v0x12d738c70_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_10.0, 8;
    %pushi/vec4 0, 0, 4;
    %assign/vec4 v0x12d738980_0, 0;
    %pushi/vec4 0, 0, 3;
    %assign/vec4 v0x12d738890_0, 0;
    %pushi/vec4 170, 0, 8;
    %assign/vec4 v0x12d73ac10_0, 0;
    %jmp T_10.1;
T_10.0 ;
    %load/vec4 v0x12d738b50_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_10.2, 8;
    %pushi/vec4 170, 0, 8;
    %assign/vec4 v0x12d73ac10_0, 0;
    %pushi/vec4 0, 0, 4;
    %assign/vec4 v0x12d738980_0, 0;
    %pushi/vec4 0, 0, 3;
    %assign/vec4 v0x12d738890_0, 0;
    %jmp T_10.3;
T_10.2 ;
    %load/vec4 v0x12d73ab70_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_10.4, 8;
    %load/vec4 v0x12d738890_0;
    %cmpi/e 7, 0, 3;
    %jmp/0xz  T_10.6, 4;
    %load/vec4 v0x12d738980_0;
    %pad/u 32;
    %cmpi/u 15, 0, 32;
    %jmp/0xz  T_10.8, 5;
    %load/vec4 v0x12d738980_0;
    %addi 1, 0, 4;
    %assign/vec4 v0x12d738980_0, 0;
    %pushi/vec4 0, 0, 3;
    %assign/vec4 v0x12d738890_0, 0;
    %load/vec4 v0x12d73af80_0;
    %pushi/vec4 127, 0, 32;
    %load/vec4 v0x12d738980_0;
    %pad/u 32;
    %addi 1, 0, 32;
    %muli 8, 0, 32;
    %sub;
    %pad/u 34;
    %subi 7, 0, 34;
    %part/s 8;
    %assign/vec4 v0x12d73ac10_0, 0;
    %jmp T_10.9;
T_10.8 ;
    %load/vec4 v0x12d738980_0;
    %addi 1, 0, 4;
    %assign/vec4 v0x12d738980_0, 0;
    %pushi/vec4 0, 0, 3;
    %assign/vec4 v0x12d738890_0, 0;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x12d73ac10_0, 0;
T_10.9 ;
    %jmp T_10.7;
T_10.6 ;
    %load/vec4 v0x12d73ac10_0;
    %parti/s 7, 0, 2;
    %concati/vec4 0, 0, 1;
    %assign/vec4 v0x12d73ac10_0, 0;
    %load/vec4 v0x12d738890_0;
    %addi 1, 0, 3;
    %assign/vec4 v0x12d738890_0, 0;
T_10.7 ;
T_10.4 ;
T_10.3 ;
T_10.1 ;
    %jmp T_10;
    .thread T_10;
    .scope S_0x12d7123a0;
T_11 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d73b180_0, 0, 1;
    %delay 166000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x12d73b180_0, 0, 1;
    %delay 166000, 0;
    %jmp T_11;
    .thread T_11;
    .scope S_0x12d7123a0;
T_12 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d73bb30_0, 0, 1;
    %delay 250000, 0;
    %end;
    .thread T_12;
    .scope S_0x12d7123a0;
T_13 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d73bb30_0, 0, 1;
    %delay 500000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x12d73bb30_0, 0, 1;
    %delay 500000, 0;
    %jmp T_13;
    .thread T_13;
    .scope S_0x12d7123a0;
T_14 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d73c550_0, 0, 1;
    %delay 33300000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x12d73c550_0, 0, 1;
    %end;
    .thread T_14;
    .scope S_0x12d7123a0;
T_15 ;
    %wait E_0x12d738240;
    %load/vec4 v0x12d73ba10_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_15.0, 8;
    %pushi/vec4 0, 0, 4;
    %assign/vec4 v0x12d73b980_0, 0;
    %pushi/vec4 0, 0, 3;
    %assign/vec4 v0x12d73b860_0, 0;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x12d73be40_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x12d73b8f0_0, 0;
    %jmp T_15.1;
T_15.0 ;
    %load/vec4 v0x12d73be40_0;
    %parti/s 7, 0, 2;
    %load/vec4 v0x12d73bc90_0;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x12d73be40_0, 0;
    %load/vec4 v0x12d73b860_0;
    %pad/u 1;
    %assign/vec4 v0x12d73b8f0_0, 0;
    %load/vec4 v0x12d73b860_0;
    %addi 1, 0, 3;
    %assign/vec4 v0x12d73b860_0, 0;
    %load/vec4 v0x12d73b8f0_0;
    %pad/u 32;
    %cmpi/e 7, 0, 32;
    %jmp/0xz  T_15.2, 4;
    %load/vec4 v0x12d73be40_0;
    %parti/s 7, 0, 2;
    %load/vec4 v0x12d73bc90_0;
    %concat/vec4; draw_concat_vec4
    %load/vec4 v0x12d73b980_0;
    %pad/u 6;
    %ix/vec4 3;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x12d73baa0, 0, 4;
    %load/vec4 v0x12d73b980_0;
    %addi 1, 0, 4;
    %assign/vec4 v0x12d73b980_0, 0;
T_15.2 ;
T_15.1 ;
    %jmp T_15;
    .thread T_15;
    .scope S_0x12d7123a0;
T_16 ;
    %fork t_1, S_0x12d712200;
    %jmp t_0;
    .scope S_0x12d712200;
t_1 ;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x12d716b40_0, 0, 32;
T_16.0 ;
    %load/vec4 v0x12d716b40_0;
    %cmpi/s 16, 0, 32;
    %jmp/0xz T_16.1, 5;
    %pushi/vec4 0, 0, 8;
    %ix/getv/s 4, v0x12d716b40_0;
    %store/vec4a v0x12d73baa0, 4, 0;
    ; show_stmt_assign_vector: Get l-value for compressed += operand
    %load/vec4 v0x12d716b40_0;
    %pushi/vec4 1, 0, 32;
    %add;
    %cast2;
    %store/vec4 v0x12d716b40_0, 0, 32;
    %jmp T_16.0;
T_16.1 ;
    %end;
    .scope S_0x12d7123a0;
t_0 %join;
    %pushi/vec4 0, 0, 4;
    %store/vec4 v0x12d73b980_0, 0, 4;
    %pushi/vec4 0, 0, 3;
    %store/vec4 v0x12d73b860_0, 0, 3;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x12d73be40_0, 0, 8;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x12d73ba10_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d73bbe0_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d73c260_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d73b5a0_0, 0, 1;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x12d73c2f0_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x12d73c380_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x12d73c410_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x12d73c4a0_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x12d73b630_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x12d73b6c0_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x12d73b750_0, 0, 16;
    %end;
    .thread T_16;
    .scope S_0x12d735ca0;
T_17 ;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x12d735e60_0, 0, 16;
    %ix/load 4, 3, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %ix/load 4, 4, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x12d735f20_0, 0, 16;
    %ix/load 4, 5, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %ix/load 4, 6, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x12d735fd0_0, 0, 16;
    %ix/load 4, 7, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %ix/load 4, 8, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x12d736090_0, 0, 16;
    %end;
    .thread T_17, $init;
    .scope S_0x12d736140;
T_18 ;
    %ix/load 4, 9, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %ix/load 4, 10, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x12d736340_0, 0, 16;
    %ix/load 4, 11, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %ix/load 4, 12, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x12d736400_0, 0, 16;
    %ix/load 4, 13, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %ix/load 4, 14, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x12d7364a0_0, 0, 16;
    %end;
    .thread T_18, $init;
    .scope S_0x12d736550;
T_19 ;
    %ix/load 4, 15, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %parti/s 1, 0, 2;
    %store/vec4 v0x12d7367c0_0, 0, 1;
    %ix/load 4, 15, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %parti/s 1, 1, 2;
    %store/vec4 v0x12d736710_0, 0, 1;
    %end;
    .thread T_19, $init;
    .scope S_0x12d7123a0;
T_20 ;
    %vpi_call/w 3 165 "$display", "========================================" {0 0 0};
    %vpi_call/w 3 166 "$display", "Packet Builder + SPI Slave Testbench" {0 0 0};
    %vpi_call/w 3 167 "$display", "========================================" {0 0 0};
T_20.0 ;
    %load/vec4 v0x12d73c550_0;
    %pad/u 32;
    %pushi/vec4 1, 0, 32;
    %cmp/e;
    %flag_get/vec4 4;
    %cmpi/ne 1, 0, 1;
    %jmp/0xz T_20.1, 6;
    %wait E_0x12d7084b0;
    %jmp T_20.0;
T_20.1 ;
    %delay 333000000, 0;
    %vpi_call/w 3 174 "$display", "\012[TEST] Step 1: Simulating Incremental Quaternion Updates" {0 0 0};
    %vpi_call/w 3 175 "$display", "  This simulates how BNO085 controller updates fields incrementally" {0 0 0};
    %pushi/vec4 4096, 0, 16;
    %store/vec4 v0x12d73c380_0, 0, 16;
    %delay 3330000, 0;
    %pushi/vec4 8192, 0, 16;
    %store/vec4 v0x12d73c410_0, 0, 16;
    %delay 3330000, 0;
    %pushi/vec4 12288, 0, 16;
    %store/vec4 v0x12d73c4a0_0, 0, 16;
    %delay 3330000, 0;
    %pushi/vec4 16384, 0, 16;
    %store/vec4 v0x12d73c2f0_0, 0, 16;
    %delay 3330000, 0;
    %vpi_call/w 3 188 "$display", "  Pulsing quat_valid (complete quaternion ready)" {0 0 0};
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x12d73c260_0, 0, 1;
    %delay 666000, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d73c260_0, 0, 1;
    %delay 3330000, 0;
    %vpi_call/w 3 195 "$display", "  Packet Builder Output:" {0 0 0};
    %vpi_call/w 3 196 "$display", "    quat1_valid = %b", v0x12d73bed0_0 {0 0 0};
    %vpi_call/w 3 197 "$display", "    W=%04h X=%04h Y=%04h Z=%04h", v0x12d73bf60_0, v0x12d73bff0_0, v0x12d73c0c0_0, v0x12d73c190_0 {0 0 0};
    %load/vec4 v0x12d73bf60_0;
    %cmpi/e 16384, 0, 16;
    %flag_get/vec4 4;
    %jmp/0 T_20.7, 4;
    %load/vec4 v0x12d73bff0_0;
    %pushi/vec4 4096, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.7;
    %flag_set/vec4 11;
    %flag_get/vec4 11;
    %jmp/0 T_20.6, 11;
    %load/vec4 v0x12d73c0c0_0;
    %pushi/vec4 8192, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.6;
    %flag_set/vec4 10;
    %flag_get/vec4 10;
    %jmp/0 T_20.5, 10;
    %load/vec4 v0x12d73c190_0;
    %pushi/vec4 12288, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.5;
    %flag_set/vec4 9;
    %flag_get/vec4 9;
    %jmp/0 T_20.4, 9;
    %load/vec4 v0x12d73bed0_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.4;
    %flag_set/vec4 8;
    %jmp/0xz  T_20.2, 8;
    %vpi_call/w 3 201 "$display", "[PASS] Packet builder latched complete quaternion atomically" {0 0 0};
    %jmp T_20.3;
T_20.2 ;
    %vpi_call/w 3 203 "$display", "[FAIL] Packet builder quaternion mismatch" {0 0 0};
    %vpi_call/w 3 204 "$display", "  Expected: W=4000 X=1000 Y=2000 Z=3000 valid=1" {0 0 0};
    %vpi_call/w 3 205 "$display", "  Got:      W=%04h X=%04h Y=%04h Z=%04h valid=%b", v0x12d73bf60_0, v0x12d73bff0_0, v0x12d73c0c0_0, v0x12d73c190_0, v0x12d73bed0_0 {0 0 0};
T_20.3 ;
    %delay 33300000, 0;
    %load/vec4 v0x12d73bf60_0;
    %cmpi/e 16384, 0, 16;
    %flag_get/vec4 4;
    %jmp/0 T_20.12, 4;
    %load/vec4 v0x12d73bff0_0;
    %pushi/vec4 4096, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.12;
    %flag_set/vec4 10;
    %flag_get/vec4 10;
    %jmp/0 T_20.11, 10;
    %load/vec4 v0x12d73c0c0_0;
    %pushi/vec4 8192, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.11;
    %flag_set/vec4 9;
    %flag_get/vec4 9;
    %jmp/0 T_20.10, 9;
    %load/vec4 v0x12d73c190_0;
    %pushi/vec4 12288, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.10;
    %flag_set/vec4 8;
    %jmp/0xz  T_20.8, 8;
    %vpi_call/w 3 213 "$display", "[PASS] Quaternion values remain stable" {0 0 0};
    %jmp T_20.9;
T_20.8 ;
    %vpi_call/w 3 215 "$display", "[FAIL] Quaternion values changed!" {0 0 0};
T_20.9 ;
    %vpi_call/w 3 219 "$display", "\012[TEST] Step 2: Simulating Incremental Gyroscope Updates" {0 0 0};
    %pushi/vec4 256, 0, 16;
    %store/vec4 v0x12d73b630_0, 0, 16;
    %delay 3330000, 0;
    %pushi/vec4 512, 0, 16;
    %store/vec4 v0x12d73b6c0_0, 0, 16;
    %delay 3330000, 0;
    %pushi/vec4 768, 0, 16;
    %store/vec4 v0x12d73b750_0, 0, 16;
    %delay 3330000, 0;
    %vpi_call/w 3 229 "$display", "  Pulsing gyro_valid (complete gyroscope ready)" {0 0 0};
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x12d73b5a0_0, 0, 1;
    %delay 666000, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d73b5a0_0, 0, 1;
    %delay 3330000, 0;
    %vpi_call/w 3 236 "$display", "  Packet Builder Output:" {0 0 0};
    %vpi_call/w 3 237 "$display", "    gyro1_valid = %b", v0x12d73b260_0 {0 0 0};
    %vpi_call/w 3 238 "$display", "    X=%04h Y=%04h Z=%04h", v0x12d73b2f0_0, v0x12d73b3c0_0, v0x12d73b490_0 {0 0 0};
    %load/vec4 v0x12d73b2f0_0;
    %cmpi/e 256, 0, 16;
    %flag_get/vec4 4;
    %jmp/0 T_20.17, 4;
    %load/vec4 v0x12d73b3c0_0;
    %pushi/vec4 512, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.17;
    %flag_set/vec4 10;
    %flag_get/vec4 10;
    %jmp/0 T_20.16, 10;
    %load/vec4 v0x12d73b490_0;
    %pushi/vec4 768, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.16;
    %flag_set/vec4 9;
    %flag_get/vec4 9;
    %jmp/0 T_20.15, 9;
    %load/vec4 v0x12d73b260_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.15;
    %flag_set/vec4 8;
    %jmp/0xz  T_20.13, 8;
    %vpi_call/w 3 242 "$display", "[PASS] Packet builder latched complete gyroscope atomically" {0 0 0};
    %jmp T_20.14;
T_20.13 ;
    %vpi_call/w 3 244 "$display", "[FAIL] Packet builder gyroscope mismatch" {0 0 0};
    %vpi_call/w 3 245 "$display", "  Expected: X=0100 Y=0200 Z=0300 valid=1" {0 0 0};
    %vpi_call/w 3 246 "$display", "  Got:      X=%04h Y=%04h Z=%04h valid=%b", v0x12d73b2f0_0, v0x12d73b3c0_0, v0x12d73b490_0, v0x12d73b260_0 {0 0 0};
T_20.14 ;
    %vpi_call/w 3 251 "$display", "\012[TEST] Step 3: Testing MCU SPI Read Transaction" {0 0 0};
    %vpi_call/w 3 252 "$display", "  Performing SPI read from FPGA..." {0 0 0};
    %delay 33300000, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d73ba10_0, 0, 1;
    %delay 2000000, 0;
    %fork t_3, S_0x12d735520;
    %jmp t_2;
    .scope S_0x12d735520;
t_3 ;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x12d735950_0, 0, 32;
T_20.18 ;
    %load/vec4 v0x12d735950_0;
    %cmpi/s 16, 0, 32;
    %jmp/0xz T_20.19, 5;
    %fork t_5, S_0x12d7356f0;
    %jmp t_4;
    .scope S_0x12d7356f0;
t_5 ;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x12d7358b0_0, 0, 32;
T_20.20 ;
    %load/vec4 v0x12d7358b0_0;
    %cmpi/s 8, 0, 32;
    %jmp/0xz T_20.21, 5;
    %delay 500000, 0;
    %delay 500000, 0;
    ; show_stmt_assign_vector: Get l-value for compressed += operand
    %load/vec4 v0x12d7358b0_0;
    %pushi/vec4 1, 0, 32;
    %add;
    %cast2;
    %store/vec4 v0x12d7358b0_0, 0, 32;
    %jmp T_20.20;
T_20.21 ;
    %end;
    .scope S_0x12d735520;
t_4 %join;
    ; show_stmt_assign_vector: Get l-value for compressed += operand
    %load/vec4 v0x12d735950_0;
    %pushi/vec4 1, 0, 32;
    %add;
    %cast2;
    %store/vec4 v0x12d735950_0, 0, 32;
    %jmp T_20.18;
T_20.19 ;
    %end;
    .scope S_0x12d7123a0;
t_2 %join;
    %delay 1000000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x12d73ba10_0, 0, 1;
    %delay 4000000, 0;
    %vpi_call/w 3 274 "$display", "  Received Packet:" {0 0 0};
    %fork t_7, S_0x12d735a10;
    %jmp t_6;
    .scope S_0x12d735a10;
t_7 ;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x12d735bf0_0, 0, 32;
T_20.22 ;
    %load/vec4 v0x12d735bf0_0;
    %cmpi/s 16, 0, 32;
    %jmp/0xz T_20.23, 5;
    %vpi_call/w 3 276 "$display", "    Byte[%2d] = 0x%02h", v0x12d735bf0_0, &A<v0x12d73baa0, v0x12d735bf0_0 > {0 0 0};
    ; show_stmt_assign_vector: Get l-value for compressed += operand
    %load/vec4 v0x12d735bf0_0;
    %pushi/vec4 1, 0, 32;
    %add;
    %cast2;
    %store/vec4 v0x12d735bf0_0, 0, 32;
    %jmp T_20.22;
T_20.23 ;
    %end;
    .scope S_0x12d7123a0;
t_6 %join;
    %ix/load 4, 0, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x12d73baa0, 4;
    %cmpi/e 170, 0, 8;
    %jmp/0xz  T_20.24, 4;
    %vpi_call/w 3 281 "$display", "[PASS] Header byte correct (0xAA)" {0 0 0};
    %jmp T_20.25;
T_20.24 ;
    %vpi_call/w 3 283 "$display", "[FAIL] Header byte incorrect: expected 0xAA, got 0x%02h", &A<v0x12d73baa0, 0> {0 0 0};
T_20.25 ;
    %fork t_9, S_0x12d735ca0;
    %jmp t_8;
    .scope S_0x12d735ca0;
t_9 ;
    %load/vec4 v0x12d735e60_0;
    %cmpi/e 16384, 0, 16;
    %flag_get/vec4 4;
    %jmp/0 T_20.30, 4;
    %load/vec4 v0x12d735f20_0;
    %pushi/vec4 4096, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.30;
    %flag_set/vec4 10;
    %flag_get/vec4 10;
    %jmp/0 T_20.29, 10;
    %load/vec4 v0x12d735fd0_0;
    %pushi/vec4 8192, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.29;
    %flag_set/vec4 9;
    %flag_get/vec4 9;
    %jmp/0 T_20.28, 9;
    %load/vec4 v0x12d736090_0;
    %pushi/vec4 12288, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.28;
    %flag_set/vec4 8;
    %jmp/0xz  T_20.26, 8;
    %vpi_call/w 3 295 "$display", "[PASS] Quaternion data in SPI packet matches expected values" {0 0 0};
    %jmp T_20.27;
T_20.26 ;
    %vpi_call/w 3 297 "$display", "[FAIL] Quaternion data mismatch in SPI packet" {0 0 0};
    %vpi_call/w 3 298 "$display", "  Expected: W=4000 X=1000 Y=2000 Z=3000" {0 0 0};
    %vpi_call/w 3 299 "$display", "  Got:      W=%04h X=%04h Y=%04h Z=%04h", v0x12d735e60_0, v0x12d735f20_0, v0x12d735fd0_0, v0x12d736090_0 {0 0 0};
T_20.27 ;
    %end;
    .scope S_0x12d7123a0;
t_8 %join;
    %fork t_11, S_0x12d736140;
    %jmp t_10;
    .scope S_0x12d736140;
t_11 ;
    %load/vec4 v0x12d736340_0;
    %cmpi/e 256, 0, 16;
    %flag_get/vec4 4;
    %jmp/0 T_20.34, 4;
    %load/vec4 v0x12d736400_0;
    %pushi/vec4 512, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.34;
    %flag_set/vec4 9;
    %flag_get/vec4 9;
    %jmp/0 T_20.33, 9;
    %load/vec4 v0x12d7364a0_0;
    %pushi/vec4 768, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.33;
    %flag_set/vec4 8;
    %jmp/0xz  T_20.31, 8;
    %vpi_call/w 3 312 "$display", "[PASS] Gyroscope data in SPI packet matches expected values" {0 0 0};
    %jmp T_20.32;
T_20.31 ;
    %vpi_call/w 3 314 "$display", "[FAIL] Gyroscope data mismatch in SPI packet" {0 0 0};
    %vpi_call/w 3 315 "$display", "  Expected: X=0100 Y=0200 Z=0300" {0 0 0};
    %vpi_call/w 3 316 "$display", "  Got:      X=%04h Y=%04h Z=%04h", v0x12d736340_0, v0x12d736400_0, v0x12d7364a0_0 {0 0 0};
T_20.32 ;
    %end;
    .scope S_0x12d7123a0;
t_10 %join;
    %fork t_13, S_0x12d736550;
    %jmp t_12;
    .scope S_0x12d736550;
t_13 ;
    %load/vec4 v0x12d7367c0_0;
    %cmpi/e 1, 0, 1;
    %flag_get/vec4 4;
    %jmp/0 T_20.37, 4;
    %load/vec4 v0x12d736710_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.37;
    %flag_set/vec4 8;
    %jmp/0xz  T_20.35, 8;
    %vpi_call/w 3 327 "$display", "[PASS] Valid flags in SPI packet are set correctly" {0 0 0};
    %jmp T_20.36;
T_20.35 ;
    %vpi_call/w 3 329 "$display", "[FAIL] Valid flags incorrect: quat=%b gyro=%b", v0x12d7367c0_0, v0x12d736710_0 {0 0 0};
T_20.36 ;
    %end;
    .scope S_0x12d7123a0;
t_12 %join;
    %vpi_call/w 3 335 "$display", "\012[TEST] Step 4: Testing Atomic Latching (Partial Update Protection)" {0 0 0};
    %vpi_call/w 3 336 "$display", "  Sending partial quaternion update (only X changes)" {0 0 0};
    %pushi/vec4 39321, 0, 16;
    %store/vec4 v0x12d73c380_0, 0, 16;
    %delay 16650000, 0;
    %load/vec4 v0x12d73bf60_0;
    %cmpi/e 16384, 0, 16;
    %flag_get/vec4 4;
    %jmp/0 T_20.42, 4;
    %load/vec4 v0x12d73bff0_0;
    %pushi/vec4 4096, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.42;
    %flag_set/vec4 10;
    %flag_get/vec4 10;
    %jmp/0 T_20.41, 10;
    %load/vec4 v0x12d73c0c0_0;
    %pushi/vec4 8192, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.41;
    %flag_set/vec4 9;
    %flag_get/vec4 9;
    %jmp/0 T_20.40, 9;
    %load/vec4 v0x12d73c190_0;
    %pushi/vec4 12288, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.40;
    %flag_set/vec4 8;
    %jmp/0xz  T_20.38, 8;
    %vpi_call/w 3 345 "$display", "[PASS] Latched values remain stable during partial update" {0 0 0};
    %jmp T_20.39;
T_20.38 ;
    %vpi_call/w 3 347 "$display", "[FAIL] Latched values changed during partial update!" {0 0 0};
T_20.39 ;
    %vpi_call/w 3 351 "$display", "  Sending complete new quaternion: W=0x5000, X=0x6000, Y=0x7000, Z=0x8000" {0 0 0};
    %pushi/vec4 20480, 0, 16;
    %store/vec4 v0x12d73c2f0_0, 0, 16;
    %pushi/vec4 24576, 0, 16;
    %store/vec4 v0x12d73c380_0, 0, 16;
    %pushi/vec4 28672, 0, 16;
    %store/vec4 v0x12d73c410_0, 0, 16;
    %pushi/vec4 32768, 0, 16;
    %store/vec4 v0x12d73c4a0_0, 0, 16;
    %delay 3330000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x12d73c260_0, 0, 1;
    %delay 666000, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x12d73c260_0, 0, 1;
    %delay 3330000, 0;
    %load/vec4 v0x12d73bf60_0;
    %cmpi/e 20480, 0, 16;
    %flag_get/vec4 4;
    %jmp/0 T_20.47, 4;
    %load/vec4 v0x12d73bff0_0;
    %pushi/vec4 24576, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.47;
    %flag_set/vec4 10;
    %flag_get/vec4 10;
    %jmp/0 T_20.46, 10;
    %load/vec4 v0x12d73c0c0_0;
    %pushi/vec4 28672, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.46;
    %flag_set/vec4 9;
    %flag_get/vec4 9;
    %jmp/0 T_20.45, 9;
    %load/vec4 v0x12d73c190_0;
    %pushi/vec4 32768, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_20.45;
    %flag_set/vec4 8;
    %jmp/0xz  T_20.43, 8;
    %vpi_call/w 3 367 "$display", "[PASS] New complete quaternion latched atomically" {0 0 0};
    %jmp T_20.44;
T_20.43 ;
    %vpi_call/w 3 369 "$display", "[FAIL] New quaternion latch error" {0 0 0};
    %vpi_call/w 3 370 "$display", "  Expected: W=5000 X=6000 Y=7000 Z=8000" {0 0 0};
    %vpi_call/w 3 371 "$display", "  Got:      W=%04h X=%04h Y=%04h Z=%04h", v0x12d73bf60_0, v0x12d73bff0_0, v0x12d73c0c0_0, v0x12d73c190_0 {0 0 0};
T_20.44 ;
    %vpi_call/w 3 375 "$display", "\012=== All Tests Complete ===" {0 0 0};
    %delay 10000000, 0;
    %vpi_call/w 3 377 "$finish" {0 0 0};
    %end;
    .thread T_20;
# The file index is used to find the file name in the following table.
:file_names 6;
    "N/A";
    "<interactive>";
    "-";
    "tb_packet_builder_spi.sv";
    "../../fpga/sensor_packet_builder.sv";
    "../../fpga/spi_slave_mcu.sv";
