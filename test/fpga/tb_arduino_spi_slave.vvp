#! /opt/homebrew/Cellar/icarus-verilog/12.0/bin/vvp
:ivl_version "12.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/system.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/vhdl_sys.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/vhdl_textio.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/v2005_math.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/va_math.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/v2009.vpi";
S_0x1516410f0 .scope package, "$unit" "$unit" 2 1;
 .timescale 0 0;
S_0x151636720 .scope module, "tb_arduino_spi_slave" "tb_arduino_spi_slave" 3 8;
 .timescale -9 -12;
P_0x151645aa0 .param/l "CLK_PERIOD" 0 3 27, +C4<00000000000000000000000101001101>;
P_0x151645ae0 .param/l "SCK_PERIOD" 0 3 37, +C4<00000000000000000010011100010000>;
v0x15166da60_0 .array/port v0x15166da60, 0;
L_0x1516710d0 .functor BUFZ 8, v0x15166da60_0, C4<00000000>, C4<00000000>, C4<00000000>;
v0x15166da60_1 .array/port v0x15166da60, 1;
L_0x151671180 .functor BUFZ 8, v0x15166da60_1, C4<00000000>, C4<00000000>, C4<00000000>;
v0x15166da60_2 .array/port v0x15166da60, 2;
L_0x151671230 .functor BUFZ 8, v0x15166da60_2, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x151671300 .functor BUFZ 4, v0x15166c970_0, C4<0000>, C4<0000>, C4<0000>;
L_0x1516713b0 .functor BUFZ 3, v0x15166c8b0_0, C4<000>, C4<000>, C4<000>;
L_0x151671490 .functor BUFZ 8, v0x15166e3a0_0, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x151671520 .functor BUFZ 8, v0x15166d870_0, C4<00000000>, C4<00000000>, C4<00000000>;
L_0x151671610 .functor BUFZ 16, v0x15166e2f0_0, C4<0000000000000000>, C4<0000000000000000>, C4<0000000000000000>;
L_0x1516716a0 .functor BUFZ 16, v0x15166dde0_0, C4<0000000000000000>, C4<0000000000000000>, C4<0000000000000000>;
L_0x1516717a0 .functor BUFZ 16, v0x15166e590_0, C4<0000000000000000>, C4<0000000000000000>, C4<0000000000000000>;
v0x15166f9e0_0 .net "bit_count", 2 0, L_0x1516713b0;  1 drivers
v0x15166fa70_0 .net "byte_count", 3 0, L_0x151671300;  1 drivers
v0x15166fb10_0 .var "clk", 0 0;
v0x15166fbe0_0 .var "cs_n", 0 0;
v0x15166fc90_0 .net "error", 0 0, v0x15166d1a0_0;  1 drivers
v0x15166fd60_0 .var/i "fail_count", 31 0;
v0x15166fdf0_0 .net "gyro1_valid", 0 0, v0x15166d3d0_0;  1 drivers
v0x15166fea0_0 .net/s "gyro1_x", 15 0, v0x15166d460_0;  1 drivers
v0x15166ff50_0 .net/s "gyro1_y", 15 0, v0x15166d500_0;  1 drivers
v0x151670080_0 .net/s "gyro1_z", 15 0, v0x15166d5b0_0;  1 drivers
v0x151670110_0 .net "header", 7 0, L_0x151671520;  1 drivers
v0x1516701a0_0 .net "initialized", 0 0, v0x15166d920_0;  1 drivers
v0x151670230_0 .net "packet_buffer_0", 7 0, L_0x1516710d0;  1 drivers
v0x1516702c0_0 .net "packet_buffer_1", 7 0, L_0x151671180;  1 drivers
v0x151670360_0 .net "packet_buffer_2", 7 0, L_0x151671230;  1 drivers
v0x151670410_0 .var/i "pass_count", 31 0;
v0x1516704c0_0 .net/s "pitch", 15 0, L_0x1516716a0;  1 drivers
v0x151670670_0 .net "quat1_valid", 0 0, v0x15166de90_0;  1 drivers
v0x151670720_0 .net/s "quat1_w", 15 0, v0x15166d2e0_0;  1 drivers
v0x1516707b0_0 .net/s "quat1_x", 15 0, v0x15166e120_0;  1 drivers
v0x151670840_0 .net/s "quat1_y", 15 0, v0x15166e1b0_0;  1 drivers
v0x1516708d0_0 .net/s "quat1_z", 15 0, v0x15166e240_0;  1 drivers
v0x151670960_0 .net/s "roll", 15 0, L_0x151671610;  1 drivers
v0x151670a00_0 .net "rx_shift", 7 0, L_0x151671490;  1 drivers
v0x151670ab0_0 .var "sck", 0 0;
v0x151670b60_0 .var "sdi", 0 0;
v0x151670c10_0 .var/i "test_count", 31 0;
v0x151670ca0_0 .net/s "yaw", 15 0, L_0x1516717a0;  1 drivers
E_0x15160c460 .event anyedge, v0x15166cba0_0;
S_0x151635ff0 .scope task, "check_test" "check_test" 3 79, 3 79 0, S_0x151636720;
 .timescale -9 -12;
v0x151646f90_0 .var "condition", 0 0;
v0x15166c0f0_0 .var/str "test_name";
TD_tb_arduino_spi_slave.check_test ;
    %load/vec4 v0x151670c10_0;
    %addi 1, 0, 32;
    %store/vec4 v0x151670c10_0, 0, 32;
    %load/vec4 v0x151646f90_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_0.0, 8;
    %vpi_call/w 3 82 "$display", "[PASS] %s", v0x15166c0f0_0 {0 0 0};
    %load/vec4 v0x151670410_0;
    %addi 1, 0, 32;
    %store/vec4 v0x151670410_0, 0, 32;
    %jmp T_0.1;
T_0.0 ;
    %vpi_call/w 3 85 "$display", "[FAIL] %s", v0x15166c0f0_0 {0 0 0};
    %load/vec4 v0x15166fd60_0;
    %addi 1, 0, 32;
    %store/vec4 v0x15166fd60_0, 0, 32;
T_0.1 ;
    %end;
S_0x15166c190 .scope module, "dut" "arduino_spi_slave" 3 43, 4 17 0, S_0x151636720;
 .timescale -9 -12;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "cs_n";
    .port_info 2 /INPUT 1 "sck";
    .port_info 3 /INPUT 1 "sdi";
    .port_info 4 /OUTPUT 1 "initialized";
    .port_info 5 /OUTPUT 1 "error";
    .port_info 6 /OUTPUT 1 "quat1_valid";
    .port_info 7 /OUTPUT 16 "quat1_w";
    .port_info 8 /OUTPUT 16 "quat1_x";
    .port_info 9 /OUTPUT 16 "quat1_y";
    .port_info 10 /OUTPUT 16 "quat1_z";
    .port_info 11 /OUTPUT 1 "gyro1_valid";
    .port_info 12 /OUTPUT 16 "gyro1_x";
    .port_info 13 /OUTPUT 16 "gyro1_y";
    .port_info 14 /OUTPUT 16 "gyro1_z";
P_0x15166c350 .param/l "HEADER_BYTE" 1 4 33, C4<10101010>;
P_0x15166c390 .param/l "PACKET_SIZE" 1 4 32, +C4<00000000000000000000000000010000>;
L_0x151670e30 .functor AND 1, v0x15166cce0_0, L_0x151670d50, C4<1>, C4<1>;
L_0x151671000 .functor AND 1, L_0x151670f40, v0x15166ce80_0, C4<1>, C4<1>;
v0x15166c760_0 .net *"_ivl_1", 0 0, L_0x151670d50;  1 drivers
v0x15166c810_0 .net *"_ivl_5", 0 0, L_0x151670f40;  1 drivers
v0x15166c8b0_0 .var "bit_count", 2 0;
v0x15166c970_0 .var "byte_count", 3 0;
v0x15166ca20_0 .net "clk", 0 0, v0x15166fb10_0;  1 drivers
v0x15166cb00_0 .net "cs_falling_edge_sck", 0 0, L_0x151670e30;  1 drivers
v0x15166cba0_0 .net "cs_n", 0 0, v0x15166fbe0_0;  1 drivers
v0x15166cc40_0 .var "cs_n_prev_clk", 0 0;
v0x15166cce0_0 .var "cs_n_prev_sck", 0 0;
v0x15166cdf0_0 .var "cs_n_sync_clk1", 0 0;
v0x15166ce80_0 .var "cs_n_sync_clk2", 0 0;
v0x15166cf20_0 .var "cs_n_sync_sck", 0 0;
v0x15166cfc0_0 .net "cs_rising_edge_clk", 0 0, L_0x151671000;  1 drivers
v0x15166d060_0 .var "cs_rising_edge_clk_delayed1", 0 0;
v0x15166d100_0 .var "cs_rising_edge_clk_delayed2", 0 0;
v0x15166d1a0_0 .var "error", 0 0;
v0x15166d240_0 .var "flags", 7 0;
v0x15166d3d0_0 .var "gyro1_valid", 0 0;
v0x15166d460_0 .var/s "gyro1_x", 15 0;
v0x15166d500_0 .var/s "gyro1_y", 15 0;
v0x15166d5b0_0 .var/s "gyro1_z", 15 0;
v0x15166d660_0 .var/s "gyro_x", 15 0;
v0x15166d710_0 .var/s "gyro_y", 15 0;
v0x15166d7c0_0 .var/s "gyro_z", 15 0;
v0x15166d870_0 .var "header", 7 0;
v0x15166d920_0 .var "initialized", 0 0;
v0x15166d9c0_0 .var "new_packet_available", 0 0;
v0x15166da60 .array "packet_buffer", 15 0, 7 0;
v0x15166dc00 .array "packet_snapshot", 15 0, 7 0;
v0x15166dca0_0 .var "packet_valid", 0 0;
v0x15166dd40_0 .var "packet_valid_raw", 0 0;
v0x15166dde0_0 .var/s "pitch", 15 0;
v0x15166de90_0 .var "quat1_valid", 0 0;
v0x15166d2e0_0 .var/s "quat1_w", 15 0;
v0x15166e120_0 .var/s "quat1_x", 15 0;
v0x15166e1b0_0 .var/s "quat1_y", 15 0;
v0x15166e240_0 .var/s "quat1_z", 15 0;
v0x15166e2f0_0 .var/s "roll", 15 0;
v0x15166e3a0_0 .var "rx_shift", 7 0;
v0x15166e450_0 .net "sck", 0 0, v0x151670ab0_0;  1 drivers
v0x15166e4f0_0 .net "sdi", 0 0, v0x151670b60_0;  1 drivers
v0x15166e590_0 .var/s "yaw", 15 0;
E_0x15166c660 .event posedge, v0x15166ca20_0;
E_0x15166c6b0 .event posedge, v0x15166cba0_0, v0x15166e450_0;
E_0x15166c700 .event negedge, v0x15166e450_0;
L_0x151670d50 .reduce/nor v0x15166cf20_0;
L_0x151670f40 .reduce/nor v0x15166cc40_0;
S_0x15166e7b0 .scope task, "send_packet_inline" "send_packet_inline" 3 115, 3 115 0, S_0x151636720;
 .timescale -9 -12;
v0x15166e990_0 .var "b0", 7 0;
v0x15166ea20_0 .var "b1", 7 0;
v0x15166eab0_0 .var "b10", 7 0;
v0x15166eb40_0 .var "b11", 7 0;
v0x15166ebe0_0 .var "b12", 7 0;
v0x15166ecd0_0 .var "b13", 7 0;
v0x15166ed80_0 .var "b14", 7 0;
v0x15166ee30_0 .var "b15", 7 0;
v0x15166eee0_0 .var "b2", 7 0;
v0x15166eff0_0 .var "b3", 7 0;
v0x15166f0a0_0 .var "b4", 7 0;
v0x15166f150_0 .var "b5", 7 0;
v0x15166f200_0 .var "b6", 7 0;
v0x15166f2b0_0 .var "b7", 7 0;
v0x15166f360_0 .var "b8", 7 0;
v0x15166f410_0 .var "b9", 7 0;
TD_tb_arduino_spi_slave.send_packet_inline ;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x15166fbe0_0, 0, 1;
    %delay 30000000, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x15166fbe0_0, 0, 1;
    %delay 20000000, 0;
    %load/vec4 v0x15166e990_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166ea20_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166eee0_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166eff0_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166f0a0_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166f150_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166f200_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166f2b0_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166f360_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166f410_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166eab0_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166eb40_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166ebe0_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166ecd0_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166ed80_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %load/vec4 v0x15166ee30_0;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %delay 10000000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x15166fbe0_0, 0, 1;
    %delay 30000000, 0;
    %end;
S_0x15166f4c0 .scope task, "send_spi_byte" "send_spi_byte" 3 98, 3 98 0, S_0x151636720;
 .timescale -9 -12;
v0x15166f680_0 .var "data", 7 0;
v0x15166f740_0 .var/i "i", 31 0;
TD_tb_arduino_spi_slave.send_spi_byte ;
    %vpi_call/w 3 100 "$display", "    [SPI] Sending byte: 0x%02X (binary: %b)", v0x15166f680_0, v0x15166f680_0 {0 0 0};
    %pushi/vec4 7, 0, 32;
    %store/vec4 v0x15166f740_0, 0, 32;
T_2.2 ;
    %load/vec4 v0x15166f740_0;
    %cmpi/s 0, 0, 32;
    %flag_inv 5; GE is !LT
    %jmp/0xz T_2.3, 5;
    %load/vec4 v0x15166f680_0;
    %load/vec4 v0x15166f740_0;
    %part/s 1;
    %store/vec4 v0x151670b60_0, 0, 1;
    %delay 2500000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x151670ab0_0, 0, 1;
    %delay 2500000, 0;
    %delay 5000000, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x151670ab0_0, 0, 1;
    %load/vec4 v0x15166f740_0;
    %subi 1, 0, 32;
    %store/vec4 v0x15166f740_0, 0, 32;
    %jmp T_2.2;
T_2.3 ;
    %vpi_call/w 3 111 "$display", "    [SPI] Byte sent: 0x%02X", v0x15166f680_0 {0 0 0};
    %end;
S_0x15166f7e0 .scope task, "wait_cdc" "wait_cdc" 3 91, 3 91 0, S_0x151636720;
 .timescale -9 -12;
TD_tb_arduino_spi_slave.wait_cdc ;
    %delay 6660000, 0;
    %end;
    .scope S_0x15166c190;
T_4 ;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x15166cf20_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x15166cce0_0, 0, 1;
    %end;
    .thread T_4, $init;
    .scope S_0x15166c190;
T_5 ;
    %wait E_0x15166c700;
    %load/vec4 v0x15166cba0_0;
    %assign/vec4 v0x15166cf20_0, 0;
    %load/vec4 v0x15166cf20_0;
    %assign/vec4 v0x15166cce0_0, 0;
    %jmp T_5;
    .thread T_5;
    .scope S_0x15166c190;
T_6 ;
    %wait E_0x15166c6b0;
    %load/vec4 v0x15166cba0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_6.0, 8;
    %pushi/vec4 0, 0, 4;
    %assign/vec4 v0x15166c970_0, 0;
    %pushi/vec4 0, 0, 3;
    %assign/vec4 v0x15166c8b0_0, 0;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x15166e3a0_0, 0;
    %jmp T_6.1;
T_6.0 ;
    %load/vec4 v0x15166c8b0_0;
    %cmpi/e 7, 0, 3;
    %jmp/0xz  T_6.2, 4;
    %load/vec4 v0x15166e3a0_0;
    %parti/s 7, 0, 2;
    %load/vec4 v0x15166e4f0_0;
    %concat/vec4; draw_concat_vec4
    %load/vec4 v0x15166c970_0;
    %pad/u 6;
    %ix/vec4 3;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166da60, 0, 4;
    %load/vec4 v0x15166c970_0;
    %addi 1, 0, 4;
    %assign/vec4 v0x15166c970_0, 0;
    %pushi/vec4 0, 0, 3;
    %assign/vec4 v0x15166c8b0_0, 0;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x15166e3a0_0, 0;
    %jmp T_6.3;
T_6.2 ;
    %load/vec4 v0x15166e3a0_0;
    %parti/s 7, 0, 2;
    %load/vec4 v0x15166e4f0_0;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x15166e3a0_0, 0;
    %load/vec4 v0x15166c8b0_0;
    %addi 1, 0, 3;
    %assign/vec4 v0x15166c8b0_0, 0;
T_6.3 ;
T_6.1 ;
    %jmp T_6;
    .thread T_6;
    .scope S_0x15166c190;
T_7 ;
    %wait E_0x15166c660;
    %load/vec4 v0x15166cba0_0;
    %assign/vec4 v0x15166cdf0_0, 0;
    %load/vec4 v0x15166cdf0_0;
    %assign/vec4 v0x15166ce80_0, 0;
    %load/vec4 v0x15166ce80_0;
    %assign/vec4 v0x15166cc40_0, 0;
    %jmp T_7;
    .thread T_7;
    .scope S_0x15166c190;
T_8 ;
    %wait E_0x15166c660;
    %load/vec4 v0x15166cfc0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_8.0, 8;
    %ix/load 4, 0, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 0, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 1, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 2, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 3, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 3, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 4, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 4, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 5, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 5, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 6, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 6, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 7, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 7, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 8, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 8, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 9, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 9, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 10, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 10, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 11, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 11, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 12, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 12, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 13, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 13, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 14, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 14, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %ix/load 4, 15, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 3, 15, 0;
    %flag_set/imm 4, 0;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x15166dc00, 0, 4;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x15166dd40_0, 0;
    %jmp T_8.1;
T_8.0 ;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x15166dd40_0, 0;
T_8.1 ;
    %jmp T_8;
    .thread T_8;
    .scope S_0x15166c190;
T_9 ;
    %wait E_0x15166c660;
    %load/vec4 v0x15166dd40_0;
    %assign/vec4 v0x15166dca0_0, 0;
    %jmp T_9;
    .thread T_9;
    .scope S_0x15166c190;
T_10 ;
    %wait E_0x15166c660;
    %load/vec4 v0x15166cfc0_0;
    %assign/vec4 v0x15166d060_0, 0;
    %load/vec4 v0x15166d060_0;
    %assign/vec4 v0x15166d100_0, 0;
    %load/vec4 v0x15166cfc0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_10.0, 8;
    %ix/load 4, 0, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %assign/vec4 v0x15166d870_0, 0;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x15166e2f0_0, 0;
    %ix/load 4, 3, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 4, 4, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x15166dde0_0, 0;
    %ix/load 4, 5, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 4, 6, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x15166e590_0, 0;
    %ix/load 4, 7, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 4, 8, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x15166d660_0, 0;
    %ix/load 4, 9, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 4, 10, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x15166d710_0, 0;
    %ix/load 4, 11, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %ix/load 4, 12, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %concat/vec4; draw_concat_vec4
    %assign/vec4 v0x15166d7c0_0, 0;
    %ix/load 4, 13, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x15166da60, 4;
    %assign/vec4 v0x15166d240_0, 0;
T_10.0 ;
    %load/vec4 v0x15166d100_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_10.2, 8;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x15166d9c0_0, 0;
    %jmp T_10.3;
T_10.2 ;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x15166d9c0_0, 0;
T_10.3 ;
    %jmp T_10;
    .thread T_10;
    .scope S_0x15166c190;
T_11 ;
    %wait E_0x15166c660;
    %load/vec4 v0x15166d9c0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_11.0, 8;
    %load/vec4 v0x15166d870_0;
    %cmpi/e 170, 0, 8;
    %jmp/0xz  T_11.2, 4;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x15166d920_0, 0;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x15166d1a0_0, 0;
    %jmp T_11.3;
T_11.2 ;
    %pushi/vec4 0, 0, 1;
    %assign/vec4 v0x15166d920_0, 0;
    %pushi/vec4 1, 0, 1;
    %assign/vec4 v0x15166d1a0_0, 0;
T_11.3 ;
T_11.0 ;
    %jmp T_11;
    .thread T_11;
    .scope S_0x15166c190;
T_12 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x15166d920_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x15166d1a0_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x15166de90_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x15166d3d0_0, 0, 1;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x15166d2e0_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x15166e120_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x15166e1b0_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x15166e240_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x15166d460_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x15166d500_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x15166d5b0_0, 0, 16;
    %end;
    .thread T_12;
    .scope S_0x15166c190;
T_13 ;
    %wait E_0x15166c660;
    %load/vec4 v0x15166d9c0_0;
    %flag_set/vec4 9;
    %flag_get/vec4 9;
    %jmp/0 T_13.2, 9;
    %load/vec4 v0x15166d870_0;
    %pushi/vec4 170, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_13.2;
    %flag_set/vec4 8;
    %jmp/0xz  T_13.0, 8;
    %pushi/vec4 16384, 0, 16;
    %assign/vec4 v0x15166d2e0_0, 0;
    %load/vec4 v0x15166e2f0_0;
    %assign/vec4 v0x15166e120_0, 0;
    %load/vec4 v0x15166dde0_0;
    %assign/vec4 v0x15166e1b0_0, 0;
    %load/vec4 v0x15166e590_0;
    %assign/vec4 v0x15166e240_0, 0;
    %load/vec4 v0x15166d660_0;
    %assign/vec4 v0x15166d460_0, 0;
    %load/vec4 v0x15166d710_0;
    %assign/vec4 v0x15166d500_0, 0;
    %load/vec4 v0x15166d7c0_0;
    %assign/vec4 v0x15166d5b0_0, 0;
    %load/vec4 v0x15166d240_0;
    %parti/s 1, 0, 2;
    %assign/vec4 v0x15166de90_0, 0;
    %load/vec4 v0x15166d240_0;
    %parti/s 1, 1, 2;
    %assign/vec4 v0x15166d3d0_0, 0;
T_13.0 ;
    %jmp T_13;
    .thread T_13;
    .scope S_0x151636720;
T_14 ;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x151670c10_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x151670410_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x15166fd60_0, 0, 32;
    %end;
    .thread T_14, $init;
    .scope S_0x151636720;
T_15 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x15166fb10_0, 0, 1;
    %delay 166000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x15166fb10_0, 0, 1;
    %delay 166000, 0;
    %jmp T_15;
    .thread T_15;
    .scope S_0x151636720;
T_16 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x151670ab0_0, 0, 1;
    %end;
    .thread T_16;
    .scope S_0x151636720;
T_17 ;
    %vpi_call/w 3 149 "$dumpfile", "tb_arduino_spi_slave.vcd" {0 0 0};
    %vpi_call/w 3 150 "$dumpvars", 32'sb00000000000000000000000000000000, S_0x151636720 {0 0 0};
    %vpi_call/w 3 152 "$display", "========================================" {0 0 0};
    %vpi_call/w 3 153 "$display", "Arduino SPI Slave Testbench" {0 0 0};
    %vpi_call/w 3 154 "$display", "========================================" {0 0 0};
    %vpi_call/w 3 155 "$display", "\000" {0 0 0};
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x15166fbe0_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x151670ab0_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x151670b60_0, 0, 1;
    %delay 3330000, 0;
    %vpi_call/w 3 167 "$display", "=== Test 0: Bit Shifting Verification ===" {0 0 0};
    %vpi_call/w 3 171 "$display", "Test 0.1: Sending 0xAA to verify bit shifting" {0 0 0};
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x15166fbe0_0, 0, 1;
    %delay 30000000, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x15166fbe0_0, 0, 1;
    %delay 20000000, 0;
    %pushi/vec4 170, 0, 8;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %delay 10000000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x15166fbe0_0, 0, 1;
    %delay 30000000, 0;
T_17.0 ;
    %load/vec4 v0x15166fbe0_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %cmpi/ne 1, 0, 1;
    %jmp/0xz T_17.1, 6;
    %wait E_0x15160c460;
    %jmp T_17.0;
T_17.1 ;
    %pushi/vec4 20, 0, 32;
T_17.2 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_17.3, 5;
    %jmp/1 T_17.3, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x15166c660;
    %jmp T_17.2;
T_17.3 ;
    %pop/vec4 1;
    %vpi_call/w 3 189 "$display", "    packet_buffer[0] = 0x%02X (expected 0xAA)", v0x151670230_0 {0 0 0};
    %pushi/str "Test 0.1: Byte 0xAA received correctly";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x151670230_0;
    %pushi/vec4 170, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %vpi_call/w 3 191 "$display", "    Expected: First bit=1 (MSB), Last bit=0 (LSB)" {0 0 0};
    %vpi_call/w 3 192 "$display", "    Pattern: 1-0-1-0-1-0-1-0" {0 0 0};
    %vpi_call/w 3 197 "$display", "Test 0.2: Sending 0x55 to verify bit shifting" {0 0 0};
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x15166fbe0_0, 0, 1;
    %delay 30000000, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x15166fbe0_0, 0, 1;
    %delay 20000000, 0;
    %pushi/vec4 85, 0, 8;
    %store/vec4 v0x15166f680_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_spi_byte, S_0x15166f4c0;
    %join;
    %delay 10000000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x15166fbe0_0, 0, 1;
    %delay 30000000, 0;
T_17.4 ;
    %load/vec4 v0x15166fbe0_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %cmpi/ne 1, 0, 1;
    %jmp/0xz T_17.5, 6;
    %wait E_0x15160c460;
    %jmp T_17.4;
T_17.5 ;
    %pushi/vec4 20, 0, 32;
T_17.6 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_17.7, 5;
    %jmp/1 T_17.7, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x15166c660;
    %jmp T_17.6;
T_17.7 ;
    %pop/vec4 1;
    %vpi_call/w 3 214 "$display", "    packet_buffer[0] = 0x%02X (expected 0x55)", v0x151670230_0 {0 0 0};
    %pushi/str "Test 0.2: Byte 0x55 received correctly";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x151670230_0;
    %pushi/vec4 85, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %vpi_call/w 3 216 "$display", "    Expected: First bit=0 (MSB), Last bit=1 (LSB)" {0 0 0};
    %vpi_call/w 3 217 "$display", "    Pattern: 0-1-0-1-0-1-0-1" {0 0 0};
    %vpi_call/w 3 220 "$display", "\000" {0 0 0};
    %vpi_call/w 3 225 "$display", "=== Test 1: Valid Packet Reception ===" {0 0 0};
    %vpi_call/w 3 229 "$display", "Test 1.1: Sending valid packet with header 0xAA" {0 0 0};
    %pushi/vec4 170, 0, 8;
    %store/vec4 v0x15166e990_0, 0, 8;
    %pushi/vec4 3, 0, 8;
    %store/vec4 v0x15166ea20_0, 0, 8;
    %pushi/vec4 232, 0, 8;
    %store/vec4 v0x15166eee0_0, 0, 8;
    %pushi/vec4 254, 0, 8;
    %store/vec4 v0x15166eff0_0, 0, 8;
    %pushi/vec4 12, 0, 8;
    %store/vec4 v0x15166f0a0_0, 0, 8;
    %pushi/vec4 7, 0, 8;
    %store/vec4 v0x15166f150_0, 0, 8;
    %pushi/vec4 208, 0, 8;
    %store/vec4 v0x15166f200_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f2b0_0, 0, 8;
    %pushi/vec4 100, 0, 8;
    %store/vec4 v0x15166f360_0, 0, 8;
    %pushi/vec4 255, 0, 8;
    %store/vec4 v0x15166f410_0, 0, 8;
    %pushi/vec4 56, 0, 8;
    %store/vec4 v0x15166eab0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eb40_0, 0, 8;
    %pushi/vec4 50, 0, 8;
    %store/vec4 v0x15166ebe0_0, 0, 8;
    %pushi/vec4 3, 0, 8;
    %store/vec4 v0x15166ecd0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ed80_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ee30_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_packet_inline, S_0x15166e7b0;
    %join;
T_17.8 ;
    %load/vec4 v0x15166fbe0_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %cmpi/ne 1, 0, 1;
    %jmp/0xz T_17.9, 6;
    %wait E_0x15160c460;
    %jmp T_17.8;
T_17.9 ;
    %pushi/vec4 25, 0, 32;
T_17.10 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_17.11, 5;
    %jmp/1 T_17.11, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x15166c660;
    %jmp T_17.10;
T_17.11 ;
    %pop/vec4 1;
    %vpi_call/w 3 253 "$display", "    Internal signals after packet reception:" {0 0 0};
    %vpi_call/w 3 254 "$display", "      packet_buffer[0] = 0x%02X (header, expected 0xAA)", v0x151670230_0 {0 0 0};
    %vpi_call/w 3 255 "$display", "      packet_buffer[1] = 0x%02X (Roll MSB, expected 0x03)", v0x1516702c0_0 {0 0 0};
    %vpi_call/w 3 256 "$display", "      packet_buffer[2] = 0x%02X (Roll LSB, expected 0xE8)", v0x151670360_0 {0 0 0};
    %vpi_call/w 3 257 "$display", "      header = 0x%02X, roll = 0x%04X (%0d)", v0x151670110_0, v0x151670960_0, v0x151670960_0 {0 0 0};
    %vpi_call/w 3 258 "$display", "      pitch = 0x%04X (%0d), yaw = 0x%04X (%0d)", v0x1516704c0_0, v0x1516704c0_0, v0x151670ca0_0, v0x151670ca0_0 {0 0 0};
    %vpi_call/w 3 261 "$display", "    Output signals after packet reception:" {0 0 0};
    %vpi_call/w 3 262 "$display", "      initialized = %b, error = %b", v0x1516701a0_0, v0x15166fc90_0 {0 0 0};
    %vpi_call/w 3 263 "$display", "      quat1_w = 0x%04X (%0d), quat1_x = 0x%04X (%0d)", v0x151670720_0, v0x151670720_0, v0x1516707b0_0, v0x1516707b0_0 {0 0 0};
    %vpi_call/w 3 264 "$display", "      quat1_y = 0x%04X (%0d), quat1_z = 0x%04X (%0d)", v0x151670840_0, v0x151670840_0, v0x1516708d0_0, v0x1516708d0_0 {0 0 0};
    %vpi_call/w 3 265 "$display", "      gyro1_x = 0x%04X (%0d), gyro1_y = 0x%04X (%0d), gyro1_z = 0x%04X (%0d)", v0x15166fea0_0, v0x15166fea0_0, v0x15166ff50_0, v0x15166ff50_0, v0x151670080_0, v0x151670080_0 {0 0 0};
    %vpi_call/w 3 267 "$display", "      quat1_valid = %b, gyro1_valid = %b", v0x151670670_0, v0x15166fdf0_0 {0 0 0};
    %pushi/str "Test 1.1a: Header valid \342\206\222 initialized = 1";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x1516701a0_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 1.1b: Header valid \342\206\222 error = 0";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x15166fc90_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 1.1c: Quat W = 16384 (Q14 format)";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x151670720_0;
    %pushi/vec4 16384, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 1.1d: Quat X = Roll (1000)";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x1516707b0_0;
    %pushi/vec4 1000, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 1.1e: Quat Y = Pitch (-500)";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x151670840_0;
    %pushi/vec4 65036, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 1.1f: Quat Z = Yaw (2000)";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x1516708d0_0;
    %pushi/vec4 2000, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 1.1g: Gyro X = 100";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x15166fea0_0;
    %pushi/vec4 100, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 1.1h: Gyro Y = -200";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x15166ff50_0;
    %pushi/vec4 65336, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 1.1i: Gyro Z = 50";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x151670080_0;
    %pushi/vec4 50, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 1.1j: Quat valid = 1 (from flags[0])";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x151670670_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 1.1k: Gyro valid = 1 (from flags[1])";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x15166fdf0_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %vpi_call/w 3 283 "$display", "\000" {0 0 0};
    %vpi_call/w 3 288 "$display", "=== Test 2: Invalid Header Detection ===" {0 0 0};
    %pushi/vec4 85, 0, 8;
    %store/vec4 v0x15166e990_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ea20_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eee0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eff0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f0a0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f150_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f200_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f2b0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f360_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f410_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eab0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eb40_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ebe0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ecd0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ed80_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ee30_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_packet_inline, S_0x15166e7b0;
    %join;
    %fork TD_tb_arduino_spi_slave.wait_cdc, S_0x15166f7e0;
    %join;
    %pushi/str "Test 2.1a: Invalid header \342\206\222 initialized = 0";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x1516701a0_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 2.1b: Invalid header \342\206\222 error = 1";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x15166fc90_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/vec4 170, 0, 8;
    %store/vec4 v0x15166e990_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ea20_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eee0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eff0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f0a0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f150_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f200_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f2b0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f360_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f410_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eab0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eb40_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ebe0_0, 0, 8;
    %pushi/vec4 3, 0, 8;
    %store/vec4 v0x15166ecd0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ed80_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ee30_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_packet_inline, S_0x15166e7b0;
    %join;
    %fork TD_tb_arduino_spi_slave.wait_cdc, S_0x15166f7e0;
    %join;
    %pushi/str "Test 2.2a: Valid header restores initialized = 1";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x1516701a0_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 2.2b: Valid header clears error = 0";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x15166fc90_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %vpi_call/w 3 320 "$display", "\000" {0 0 0};
    %vpi_call/w 3 325 "$display", "=== Test 3: Flag Mapping ===" {0 0 0};
    %pushi/vec4 170, 0, 8;
    %store/vec4 v0x15166e990_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ea20_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eee0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eff0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f0a0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f150_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f200_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f2b0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f360_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f410_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eab0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eb40_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ebe0_0, 0, 8;
    %pushi/vec4 1, 0, 8;
    %store/vec4 v0x15166ecd0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ed80_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ee30_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_packet_inline, S_0x15166e7b0;
    %join;
    %fork TD_tb_arduino_spi_slave.wait_cdc, S_0x15166f7e0;
    %join;
    %pushi/str "Test 3.1a: Flag 0x01 \342\206\222 quat_valid = 1";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x151670670_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 3.1b: Flag 0x01 \342\206\222 gyro_valid = 0";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x15166fdf0_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/vec4 170, 0, 8;
    %store/vec4 v0x15166e990_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ea20_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eee0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eff0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f0a0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f150_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f200_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f2b0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f360_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f410_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eab0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eb40_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ebe0_0, 0, 8;
    %pushi/vec4 2, 0, 8;
    %store/vec4 v0x15166ecd0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ed80_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ee30_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_packet_inline, S_0x15166e7b0;
    %join;
    %fork TD_tb_arduino_spi_slave.wait_cdc, S_0x15166f7e0;
    %join;
    %pushi/str "Test 3.2a: Flag 0x02 \342\206\222 quat_valid = 0";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x151670670_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 3.2b: Flag 0x02 \342\206\222 gyro_valid = 1";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x15166fdf0_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/vec4 170, 0, 8;
    %store/vec4 v0x15166e990_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ea20_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eee0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eff0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f0a0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f150_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f200_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f2b0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f360_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f410_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eab0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eb40_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ebe0_0, 0, 8;
    %pushi/vec4 3, 0, 8;
    %store/vec4 v0x15166ecd0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ed80_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ee30_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_packet_inline, S_0x15166e7b0;
    %join;
    %fork TD_tb_arduino_spi_slave.wait_cdc, S_0x15166f7e0;
    %join;
    %pushi/str "Test 3.3a: Flag 0x03 \342\206\222 quat_valid = 1";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x151670670_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 3.3b: Flag 0x03 \342\206\222 gyro_valid = 1";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x15166fdf0_0;
    %pushi/vec4 1, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/vec4 170, 0, 8;
    %store/vec4 v0x15166e990_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ea20_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eee0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eff0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f0a0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f150_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f200_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f2b0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f360_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f410_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eab0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eb40_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ebe0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ecd0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ed80_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ee30_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_packet_inline, S_0x15166e7b0;
    %join;
    %fork TD_tb_arduino_spi_slave.wait_cdc, S_0x15166f7e0;
    %join;
    %pushi/str "Test 3.4a: Flag 0x00 \342\206\222 quat_valid = 0";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x151670670_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 3.4b: Flag 0x00 \342\206\222 gyro_valid = 0";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x15166fdf0_0;
    %pushi/vec4 0, 0, 1;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %vpi_call/w 3 387 "$display", "\000" {0 0 0};
    %vpi_call/w 3 392 "$display", "=== Test 4: Edge Cases ===" {0 0 0};
    %pushi/vec4 170, 0, 8;
    %store/vec4 v0x15166e990_0, 0, 8;
    %pushi/vec4 127, 0, 8;
    %store/vec4 v0x15166ea20_0, 0, 8;
    %pushi/vec4 255, 0, 8;
    %store/vec4 v0x15166eee0_0, 0, 8;
    %pushi/vec4 127, 0, 8;
    %store/vec4 v0x15166eff0_0, 0, 8;
    %pushi/vec4 255, 0, 8;
    %store/vec4 v0x15166f0a0_0, 0, 8;
    %pushi/vec4 127, 0, 8;
    %store/vec4 v0x15166f150_0, 0, 8;
    %pushi/vec4 255, 0, 8;
    %store/vec4 v0x15166f200_0, 0, 8;
    %pushi/vec4 127, 0, 8;
    %store/vec4 v0x15166f2b0_0, 0, 8;
    %pushi/vec4 255, 0, 8;
    %store/vec4 v0x15166f360_0, 0, 8;
    %pushi/vec4 127, 0, 8;
    %store/vec4 v0x15166f410_0, 0, 8;
    %pushi/vec4 255, 0, 8;
    %store/vec4 v0x15166eab0_0, 0, 8;
    %pushi/vec4 127, 0, 8;
    %store/vec4 v0x15166eb40_0, 0, 8;
    %pushi/vec4 255, 0, 8;
    %store/vec4 v0x15166ebe0_0, 0, 8;
    %pushi/vec4 3, 0, 8;
    %store/vec4 v0x15166ecd0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ed80_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ee30_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_packet_inline, S_0x15166e7b0;
    %join;
    %fork TD_tb_arduino_spi_slave.wait_cdc, S_0x15166f7e0;
    %join;
    %pushi/str "Test 4.1a: Max positive Roll (32767)";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x1516707b0_0;
    %pushi/vec4 32767, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 4.1b: Max positive Pitch (32767)";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x151670840_0;
    %pushi/vec4 32767, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 4.1c: Max positive Yaw (32767)";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x1516708d0_0;
    %pushi/vec4 32767, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 4.1d: Max positive Gyro X (32767)";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x15166fea0_0;
    %pushi/vec4 32767, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/vec4 170, 0, 8;
    %store/vec4 v0x15166e990_0, 0, 8;
    %pushi/vec4 128, 0, 8;
    %store/vec4 v0x15166ea20_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eee0_0, 0, 8;
    %pushi/vec4 128, 0, 8;
    %store/vec4 v0x15166eff0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f0a0_0, 0, 8;
    %pushi/vec4 128, 0, 8;
    %store/vec4 v0x15166f150_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f200_0, 0, 8;
    %pushi/vec4 128, 0, 8;
    %store/vec4 v0x15166f2b0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f360_0, 0, 8;
    %pushi/vec4 128, 0, 8;
    %store/vec4 v0x15166f410_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eab0_0, 0, 8;
    %pushi/vec4 128, 0, 8;
    %store/vec4 v0x15166eb40_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ebe0_0, 0, 8;
    %pushi/vec4 3, 0, 8;
    %store/vec4 v0x15166ecd0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ed80_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ee30_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_packet_inline, S_0x15166e7b0;
    %join;
    %fork TD_tb_arduino_spi_slave.wait_cdc, S_0x15166f7e0;
    %join;
    %pushi/str "Test 4.2a: Max negative Roll (-32768)";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x1516707b0_0;
    %pushi/vec4 32768, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 4.2b: Max negative Pitch (-32768)";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x151670840_0;
    %pushi/vec4 32768, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 4.2c: Max negative Yaw (-32768)";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x1516708d0_0;
    %pushi/vec4 32768, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 4.2d: Max negative Gyro X (-32768)";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x15166fea0_0;
    %pushi/vec4 32768, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/vec4 170, 0, 8;
    %store/vec4 v0x15166e990_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ea20_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eee0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eff0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f0a0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f150_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f200_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f2b0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f360_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f410_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eab0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eb40_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ebe0_0, 0, 8;
    %pushi/vec4 3, 0, 8;
    %store/vec4 v0x15166ecd0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ed80_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ee30_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_packet_inline, S_0x15166e7b0;
    %join;
    %fork TD_tb_arduino_spi_slave.wait_cdc, S_0x15166f7e0;
    %join;
    %pushi/str "Test 4.3a: Zero Roll";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x1516707b0_0;
    %pushi/vec4 0, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 4.3b: Zero Pitch";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x151670840_0;
    %pushi/vec4 0, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 4.3c: Zero Yaw";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x1516708d0_0;
    %pushi/vec4 0, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/str "Test 4.3d: Zero Gyro X";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x15166fea0_0;
    %pushi/vec4 0, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %vpi_call/w 3 453 "$display", "\000" {0 0 0};
    %vpi_call/w 3 458 "$display", "=== Test 5: Multiple Packets ===" {0 0 0};
    %pushi/vec4 170, 0, 8;
    %store/vec4 v0x15166e990_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ea20_0, 0, 8;
    %pushi/vec4 100, 0, 8;
    %store/vec4 v0x15166eee0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eff0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f0a0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f150_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f200_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f2b0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f360_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f410_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eab0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eb40_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ebe0_0, 0, 8;
    %pushi/vec4 3, 0, 8;
    %store/vec4 v0x15166ecd0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ed80_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ee30_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_packet_inline, S_0x15166e7b0;
    %join;
    %fork TD_tb_arduino_spi_slave.wait_cdc, S_0x15166f7e0;
    %join;
    %pushi/str "Test 5.1a: First packet Roll = 100";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x1516707b0_0;
    %pushi/vec4 100, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %pushi/vec4 170, 0, 8;
    %store/vec4 v0x15166e990_0, 0, 8;
    %pushi/vec4 1, 0, 8;
    %store/vec4 v0x15166ea20_0, 0, 8;
    %pushi/vec4 244, 0, 8;
    %store/vec4 v0x15166eee0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eff0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f0a0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f150_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f200_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f2b0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f360_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166f410_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eab0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166eb40_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ebe0_0, 0, 8;
    %pushi/vec4 3, 0, 8;
    %store/vec4 v0x15166ecd0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ed80_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x15166ee30_0, 0, 8;
    %fork TD_tb_arduino_spi_slave.send_packet_inline, S_0x15166e7b0;
    %join;
    %fork TD_tb_arduino_spi_slave.wait_cdc, S_0x15166f7e0;
    %join;
    %pushi/str "Test 5.1b: Second packet Roll = 500";
    %store/str v0x15166c0f0_0;
    %load/vec4 v0x1516707b0_0;
    %pushi/vec4 500, 0, 16;
    %cmp/e;
    %flag_get/vec4 4;
    %store/vec4 v0x151646f90_0, 0, 1;
    %fork TD_tb_arduino_spi_slave.check_test, S_0x151635ff0;
    %join;
    %vpi_call/w 3 493 "$display", "\000" {0 0 0};
    %vpi_call/w 3 498 "$display", "========================================" {0 0 0};
    %vpi_call/w 3 499 "$display", "Test Summary" {0 0 0};
    %vpi_call/w 3 500 "$display", "========================================" {0 0 0};
    %vpi_call/w 3 501 "$display", "Total Tests: %0d", v0x151670c10_0 {0 0 0};
    %vpi_call/w 3 502 "$display", "Passed: %0d", v0x151670410_0 {0 0 0};
    %vpi_call/w 3 503 "$display", "Failed: %0d", v0x15166fd60_0 {0 0 0};
    %vpi_call/w 3 504 "$display", "========================================" {0 0 0};
    %load/vec4 v0x15166fd60_0;
    %cmpi/e 0, 0, 32;
    %jmp/0xz  T_17.12, 4;
    %vpi_call/w 3 507 "$display", "ALL TESTS PASSED" {0 0 0};
    %jmp T_17.13;
T_17.12 ;
    %vpi_call/w 3 509 "$display", "SOME TESTS FAILED" {0 0 0};
T_17.13 ;
    %vpi_call/w 3 511 "$display", "========================================" {0 0 0};
    %delay 3330000, 0;
    %vpi_call/w 3 514 "$finish" {0 0 0};
    %end;
    .thread T_17;
# The file index is used to find the file name in the following table.
:file_names 5;
    "N/A";
    "<interactive>";
    "-";
    "tb_arduino_spi_slave.sv";
    "/Users/emmettstralka/Desktop/E155_Final_SPI_Test/fpga/arduino_spi_slave.sv";
