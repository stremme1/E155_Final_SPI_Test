#! /opt/homebrew/Cellar/icarus-verilog/12.0/bin/vvp
:ivl_version "12.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/system.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/vhdl_sys.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/vhdl_textio.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/v2005_math.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/va_math.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/v2009.vpi";
S_0x14a204280 .scope package, "$unit" "$unit" 2 1;
 .timescale 0 0;
S_0x14a2043f0 .scope module, "tb_spi_slave_mcu_debug" "tb_spi_slave_mcu_debug" 3 7;
 .timescale -9 -12;
P_0x14a206470 .param/l "CLK_PERIOD" 0 3 11, +C4<00000000000000000000000101001101>;
P_0x14a2064b0 .param/l "SCK_PERIOD" 0 3 62, +C4<00000000000000000000000000110010>;
v0x14a21b840_0 .var "clk", 0 0;
v0x14a21b900_0 .var "cs_n", 0 0;
v0x14a21b9b0_0 .var "gyro1_valid", 0 0;
v0x14a21ba80_0 .var/s "gyro1_x", 15 0;
v0x14a21bb30_0 .var/s "gyro1_y", 15 0;
v0x14a21bc00_0 .var/s "gyro1_z", 15 0;
v0x14a21bcb0_0 .var/i "i", 31 0;
v0x14a21bd40_0 .var "quat1_valid", 0 0;
v0x14a21bdf0_0 .var/s "quat1_w", 15 0;
v0x14a21bf20_0 .var/s "quat1_x", 15 0;
v0x14a21bfb0_0 .var/s "quat1_y", 15 0;
v0x14a21c040_0 .var/s "quat1_z", 15 0;
v0x14a21c0f0 .array "received_packet", 15 0, 7 0;
v0x14a21c180_0 .var "sck", 0 0;
v0x14a21c230_0 .var "sdi", 0 0;
v0x14a21c2e0_0 .net "sdo", 0 0, L_0x14a21d920;  1 drivers
S_0x14a209950 .scope module, "dut" "spi_slave_mcu" 3 39, 4 16 0, S_0x14a2043f0;
 .timescale -9 -12;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "cs_n";
    .port_info 2 /INPUT 1 "sck";
    .port_info 3 /INPUT 1 "sdi";
    .port_info 4 /OUTPUT 1 "sdo";
    .port_info 5 /INPUT 1 "quat1_valid";
    .port_info 6 /INPUT 16 "quat1_w";
    .port_info 7 /INPUT 16 "quat1_x";
    .port_info 8 /INPUT 16 "quat1_y";
    .port_info 9 /INPUT 16 "quat1_z";
    .port_info 10 /INPUT 1 "gyro1_valid";
    .port_info 11 /INPUT 16 "gyro1_x";
    .port_info 12 /INPUT 16 "gyro1_y";
    .port_info 13 /INPUT 16 "gyro1_z";
P_0x14a209860 .param/l "HEADER_BYTE" 1 4 38, C4<10101010>;
P_0x14a2098a0 .param/l "PACKET_SIZE" 1 4 37, +C4<00000000000000000000000000010000>;
L_0x14a21ce60 .functor NOT 1, v0x14a21abb0_0, C4<0>, C4<0>, C4<0>;
L_0x14a21d110 .functor AND 1, v0x14a21ab10_0, L_0x14a21ce60, C4<1>, C4<1>;
L_0x14a21d1e0 .functor NOT 1, v0x14a21ab10_0, C4<0>, C4<0>, C4<0>;
L_0x14a21d290 .functor AND 1, L_0x14a21d1e0, v0x14a21abb0_0, C4<1>, C4<1>;
L_0x14a21da00 .functor NOT 1, v0x14a21a0c0_0, C4<0>, C4<0>, C4<0>;
L_0x14a21daa0 .functor AND 1, L_0x14a21da00, v0x14a21a160_0, C4<1>, C4<1>;
L_0x130040058 .functor BUFT 1, C4<000000>, C4<0>, C4<0>, C4<0>;
v0x14a209d00_0 .net/2u *"_ivl_46", 5 0, L_0x130040058;  1 drivers
v0x14a2199e0_0 .net *"_ivl_50", 0 0, L_0x14a21ce60;  1 drivers
v0x14a219a80_0 .net *"_ivl_54", 0 0, L_0x14a21d1e0;  1 drivers
o0x1300080a0 .functor BUFZ 1, C4<z>; HiZ drive
; Elide local net with no drivers, v0x14a219b10_0 name=_ivl_76
v0x14a219ba0_0 .net *"_ivl_79", 0 0, L_0x14a21d7f0;  1 drivers
v0x14a219c70_0 .net *"_ivl_82", 0 0, L_0x14a21da00;  1 drivers
v0x14a219d20_0 .var "bit_count", 2 0;
v0x14a219dd0_0 .var "byte_count", 3 0;
v0x14a219e80_0 .net "clk", 0 0, v0x14a21b840_0;  1 drivers
v0x14a219f90_0 .net "cs_falling", 0 0, L_0x14a21daa0;  1 drivers
v0x14a21a020_0 .net "cs_n", 0 0, v0x14a21b900_0;  1 drivers
v0x14a21a0c0_0 .var "cs_n_d", 0 0;
v0x14a21a160_0 .var "cs_n_dd", 0 0;
v0x14a21a200_0 .net "gyro1_valid", 0 0, v0x14a21b9b0_0;  1 drivers
v0x14a21a2a0_0 .net/s "gyro1_x", 15 0, v0x14a21ba80_0;  1 drivers
v0x14a21a350_0 .net/s "gyro1_y", 15 0, v0x14a21bb30_0;  1 drivers
v0x14a21a400_0 .net/s "gyro1_z", 15 0, v0x14a21bc00_0;  1 drivers
L_0x130040010 .functor BUFT 1, C4<10101010>, C4<0>, C4<0>, C4<0>;
v0x14a21a590 .array "packet_buffer", 15 0;
v0x14a21a590_0 .net v0x14a21a590 0, 7 0, L_0x130040010; 1 drivers
v0x14a21a590_1 .net v0x14a21a590 1, 7 0, L_0x14a21c3b0; 1 drivers
v0x14a21a590_2 .net v0x14a21a590 2, 7 0, L_0x14a21c4b0; 1 drivers
v0x14a21a590_3 .net v0x14a21a590 3, 7 0, L_0x14a21c550; 1 drivers
v0x14a21a590_4 .net v0x14a21a590 4, 7 0, L_0x14a21c650; 1 drivers
v0x14a21a590_5 .net v0x14a21a590 5, 7 0, L_0x14a21c6f0; 1 drivers
v0x14a21a590_6 .net v0x14a21a590 6, 7 0, L_0x14a21c7f0; 1 drivers
v0x14a21a590_7 .net v0x14a21a590 7, 7 0, L_0x14a21c890; 1 drivers
v0x14a21a590_8 .net v0x14a21a590 8, 7 0, L_0x14a21c9b0; 1 drivers
v0x14a21a590_9 .net v0x14a21a590 9, 7 0, L_0x14a21ca50; 1 drivers
v0x14a21a590_10 .net v0x14a21a590 10, 7 0, L_0x14a21cb80; 1 drivers
v0x14a21a590_11 .net v0x14a21a590 11, 7 0, L_0x14a21cc20; 1 drivers
v0x14a21a590_12 .net v0x14a21a590 12, 7 0, L_0x14a21cd20; 1 drivers
v0x14a21a590_13 .net v0x14a21a590 13, 7 0, L_0x14a21cdc0; 1 drivers
v0x14a21a590_14 .net v0x14a21a590 14, 7 0, L_0x14a21ced0; 1 drivers
v0x14a21a590_15 .net v0x14a21a590 15, 7 0, L_0x14a21cf70; 1 drivers
v0x14a21a710_0 .net "quat1_valid", 0 0, v0x14a21bd40_0;  1 drivers
v0x14a21a7b0_0 .net/s "quat1_w", 15 0, v0x14a21bdf0_0;  1 drivers
v0x14a21a860_0 .net/s "quat1_x", 15 0, v0x14a21bf20_0;  1 drivers
v0x14a21a910_0 .net/s "quat1_y", 15 0, v0x14a21bfb0_0;  1 drivers
v0x14a21a9c0_0 .net/s "quat1_z", 15 0, v0x14a21c040_0;  1 drivers
v0x14a21aa70_0 .net "sck", 0 0, v0x14a21c180_0;  1 drivers
v0x14a21ab10_0 .var "sck_d", 0 0;
v0x14a21abb0_0 .var "sck_dd", 0 0;
v0x14a21ac50_0 .net "sck_falling", 0 0, L_0x14a21d290;  1 drivers
v0x14a21acf0_0 .net "sck_rising", 0 0, L_0x14a21d110;  1 drivers
v0x14a21ad90_0 .net "sdi", 0 0, v0x14a21c230_0;  1 drivers
v0x14a21ae30_0 .net "sdo", 0 0, L_0x14a21d920;  alias, 1 drivers
v0x14a21aed0_0 .var "shift_out", 7 0;
v0x14a21af80_0 .net "tx_packet", 127 0, L_0x14a21d3c0;  1 drivers
E_0x14a204b60 .event posedge, v0x14a219e80_0;
L_0x14a21c3b0 .part v0x14a21bdf0_0, 8, 8;
L_0x14a21c4b0 .part v0x14a21bdf0_0, 0, 8;
L_0x14a21c550 .part v0x14a21bf20_0, 8, 8;
L_0x14a21c650 .part v0x14a21bf20_0, 0, 8;
L_0x14a21c6f0 .part v0x14a21bfb0_0, 8, 8;
L_0x14a21c7f0 .part v0x14a21bfb0_0, 0, 8;
L_0x14a21c890 .part v0x14a21c040_0, 8, 8;
L_0x14a21c9b0 .part v0x14a21c040_0, 0, 8;
L_0x14a21ca50 .part v0x14a21ba80_0, 8, 8;
L_0x14a21cb80 .part v0x14a21ba80_0, 0, 8;
L_0x14a21cc20 .part v0x14a21bb30_0, 8, 8;
L_0x14a21cd20 .part v0x14a21bb30_0, 0, 8;
L_0x14a21cdc0 .part v0x14a21bc00_0, 8, 8;
L_0x14a21ced0 .part v0x14a21bc00_0, 0, 8;
L_0x14a21cf70 .concat [ 1 1 6 0], v0x14a21bd40_0, v0x14a21b9b0_0, L_0x130040058;
LS_0x14a21d3c0_0_0 .concat [ 8 8 8 8], L_0x14a21cf70, L_0x14a21ced0, L_0x14a21cdc0, L_0x14a21cd20;
LS_0x14a21d3c0_0_4 .concat [ 8 8 8 8], L_0x14a21cc20, L_0x14a21cb80, L_0x14a21ca50, L_0x14a21c9b0;
LS_0x14a21d3c0_0_8 .concat [ 8 8 8 8], L_0x14a21c890, L_0x14a21c7f0, L_0x14a21c6f0, L_0x14a21c650;
LS_0x14a21d3c0_0_12 .concat [ 8 8 8 8], L_0x14a21c550, L_0x14a21c4b0, L_0x14a21c3b0, L_0x130040010;
L_0x14a21d3c0 .concat [ 32 32 32 32], LS_0x14a21d3c0_0_0, LS_0x14a21d3c0_0_4, LS_0x14a21d3c0_0_8, LS_0x14a21d3c0_0_12;
L_0x14a21d7f0 .part v0x14a21aed0_0, 7, 1;
L_0x14a21d920 .functor MUXZ 1, L_0x14a21d7f0, o0x1300080a0, v0x14a21b900_0, C4<>;
S_0x14a21b180 .scope task, "read_byte_spi" "read_byte_spi" 3 65, 3 65 0, S_0x14a2043f0;
 .timescale -9 -12;
v0x14a21b350_0 .var "data", 7 0;
v0x14a21b3e0_0 .var/i "i", 31 0;
v0x14a21b470_0 .var "temp_data", 7 0;
TD_tb_spi_slave_mcu_debug.read_byte_spi ;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x14a21b470_0, 0, 8;
    %pushi/vec4 7, 0, 32;
    %store/vec4 v0x14a21b3e0_0, 0, 32;
T_0.0 ;
    %load/vec4 v0x14a21b3e0_0;
    %cmpi/s 0, 0, 32;
    %flag_inv 5; GE is !LT
    %jmp/0xz T_0.1, 5;
    %delay 12000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14a21c180_0, 0, 1;
    %pushi/vec4 2, 0, 32;
T_0.2 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_0.3, 5;
    %jmp/1 T_0.3, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x14a204b60;
    %jmp T_0.2;
T_0.3 ;
    %pop/vec4 1;
    %load/vec4 v0x14a21c2e0_0;
    %ix/getv/s 4, v0x14a21b3e0_0;
    %store/vec4 v0x14a21b470_0, 4, 1;
    %delay 12000, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14a21c180_0, 0, 1;
    %pushi/vec4 2, 0, 32;
T_0.4 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_0.5, 5;
    %jmp/1 T_0.5, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x14a204b60;
    %jmp T_0.4;
T_0.5 ;
    %pop/vec4 1;
    %delay 12000, 0;
    %load/vec4 v0x14a21b3e0_0;
    %subi 1, 0, 32;
    %store/vec4 v0x14a21b3e0_0, 0, 32;
    %jmp T_0.0;
T_0.1 ;
    %load/vec4 v0x14a21b470_0;
    %store/vec4 v0x14a21b350_0, 0, 8;
    %end;
S_0x14a21b500 .scope task, "read_packet" "read_packet" 3 97, 3 97 0, S_0x14a2043f0;
 .timescale -9 -12;
v0x14a21b6e0_0 .var/i "i", 31 0;
v0x14a21b790_0 .var "temp_byte", 7 0;
TD_tb_spi_slave_mcu_debug.read_packet ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14a21b900_0, 0, 1;
    %pushi/vec4 3, 0, 32;
T_1.6 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_1.7, 5;
    %jmp/1 T_1.7, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x14a204b60;
    %jmp T_1.6;
T_1.7 ;
    %pop/vec4 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14a21c180_0, 0, 1;
    %pushi/vec4 2, 0, 32;
T_1.8 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_1.9, 5;
    %jmp/1 T_1.9, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x14a204b60;
    %jmp T_1.8;
T_1.9 ;
    %pop/vec4 1;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x14a21b6e0_0, 0, 32;
T_1.10 ;
    %load/vec4 v0x14a21b6e0_0;
    %cmpi/s 16, 0, 32;
    %jmp/0xz T_1.11, 5;
    %fork TD_tb_spi_slave_mcu_debug.read_byte_spi, S_0x14a21b180;
    %join;
    %load/vec4 v0x14a21b350_0;
    %store/vec4 v0x14a21b790_0, 0, 8;
    %load/vec4 v0x14a21b790_0;
    %ix/getv/s 4, v0x14a21b6e0_0;
    %store/vec4a v0x14a21c0f0, 4, 0;
    %vpi_call/w 3 114 "$display", "  Byte[%2d] = 0x%02X", v0x14a21b6e0_0, &A<v0x14a21c0f0, v0x14a21b6e0_0 > {0 0 0};
    %load/vec4 v0x14a21b6e0_0;
    %addi 1, 0, 32;
    %store/vec4 v0x14a21b6e0_0, 0, 32;
    %jmp T_1.10;
T_1.11 ;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14a21b900_0, 0, 1;
    %pushi/vec4 2, 0, 32;
T_1.12 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_1.13, 5;
    %jmp/1 T_1.13, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x14a204b60;
    %jmp T_1.12;
T_1.13 ;
    %pop/vec4 1;
    %end;
    .scope S_0x14a209950;
T_2 ;
    %wait E_0x14a204b60;
    %load/vec4 v0x14a21aa70_0;
    %assign/vec4 v0x14a21ab10_0, 0;
    %load/vec4 v0x14a21ab10_0;
    %assign/vec4 v0x14a21abb0_0, 0;
    %jmp T_2;
    .thread T_2;
    .scope S_0x14a209950;
T_3 ;
    %wait E_0x14a204b60;
    %load/vec4 v0x14a21a020_0;
    %assign/vec4 v0x14a21a0c0_0, 0;
    %load/vec4 v0x14a21a0c0_0;
    %assign/vec4 v0x14a21a160_0, 0;
    %jmp T_3;
    .thread T_3;
    .scope S_0x14a209950;
T_4 ;
    %wait E_0x14a204b60;
    %load/vec4 v0x14a21a020_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_4.0, 8;
    %pushi/vec4 0, 0, 4;
    %assign/vec4 v0x14a219dd0_0, 0;
    %pushi/vec4 0, 0, 3;
    %assign/vec4 v0x14a219d20_0, 0;
    %load/vec4 v0x14a21af80_0;
    %parti/s 8, 120, 8;
    %assign/vec4 v0x14a21aed0_0, 0;
    %jmp T_4.1;
T_4.0 ;
    %load/vec4 v0x14a219f90_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_4.2, 8;
    %load/vec4 v0x14a21af80_0;
    %parti/s 8, 120, 8;
    %assign/vec4 v0x14a21aed0_0, 0;
    %pushi/vec4 0, 0, 4;
    %assign/vec4 v0x14a219dd0_0, 0;
    %pushi/vec4 0, 0, 3;
    %assign/vec4 v0x14a219d20_0, 0;
T_4.2 ;
    %load/vec4 v0x14a21ac50_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_4.4, 8;
    %load/vec4 v0x14a219d20_0;
    %cmpi/e 7, 0, 3;
    %jmp/0xz  T_4.6, 4;
    %load/vec4 v0x14a219dd0_0;
    %addi 1, 0, 4;
    %assign/vec4 v0x14a219dd0_0, 0;
    %pushi/vec4 0, 0, 3;
    %assign/vec4 v0x14a219d20_0, 0;
    %load/vec4 v0x14a219dd0_0;
    %pad/u 32;
    %cmpi/u 15, 0, 32;
    %jmp/0xz  T_4.8, 5;
    %load/vec4 v0x14a21af80_0;
    %pushi/vec4 127, 0, 32;
    %load/vec4 v0x14a219dd0_0;
    %pad/u 32;
    %addi 1, 0, 32;
    %muli 8, 0, 32;
    %sub;
    %pad/u 34;
    %subi 7, 0, 34;
    %part/s 8;
    %assign/vec4 v0x14a21aed0_0, 0;
T_4.8 ;
    %jmp T_4.7;
T_4.6 ;
    %load/vec4 v0x14a21aed0_0;
    %parti/s 7, 0, 2;
    %concati/vec4 0, 0, 1;
    %assign/vec4 v0x14a21aed0_0, 0;
    %load/vec4 v0x14a219d20_0;
    %addi 1, 0, 3;
    %assign/vec4 v0x14a219d20_0, 0;
T_4.7 ;
T_4.4 ;
T_4.1 ;
    %jmp T_4;
    .thread T_4;
    .scope S_0x14a2043f0;
T_5 ;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14a21b900_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14a21c180_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14a21c230_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14a21bd40_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14a21b9b0_0, 0, 1;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14a21bdf0_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14a21bf20_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14a21bfb0_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14a21c040_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14a21ba80_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14a21bb30_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %store/vec4 v0x14a21bc00_0, 0, 16;
    %end;
    .thread T_5, $init;
    .scope S_0x14a2043f0;
T_6 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14a21b840_0, 0, 1;
    %delay 166000, 0;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14a21b840_0, 0, 1;
    %delay 166000, 0;
    %jmp T_6;
    .thread T_6;
    .scope S_0x14a2043f0;
T_7 ;
    %vpi_call/w 3 129 "$dumpfile", "tb_spi_slave_mcu_debug.vcd" {0 0 0};
    %vpi_call/w 3 130 "$dumpvars", 32'sb00000000000000000000000000000000, S_0x14a2043f0 {0 0 0};
    %vpi_call/w 3 132 "$display", "========================================" {0 0 0};
    %vpi_call/w 3 133 "$display", "SPI Slave MCU Debug Testbench" {0 0 0};
    %vpi_call/w 3 134 "$display", "========================================" {0 0 0};
    %vpi_call/w 3 135 "$display", "\000" {0 0 0};
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14a21b900_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14a21c180_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14a21c230_0, 0, 1;
    %pushi/vec4 4660, 0, 16;
    %store/vec4 v0x14a21bdf0_0, 0, 16;
    %pushi/vec4 22136, 0, 16;
    %store/vec4 v0x14a21bf20_0, 0, 16;
    %pushi/vec4 39612, 0, 16;
    %store/vec4 v0x14a21bfb0_0, 0, 16;
    %pushi/vec4 57072, 0, 16;
    %store/vec4 v0x14a21c040_0, 0, 16;
    %pushi/vec4 4369, 0, 16;
    %store/vec4 v0x14a21ba80_0, 0, 16;
    %pushi/vec4 8738, 0, 16;
    %store/vec4 v0x14a21bb30_0, 0, 16;
    %pushi/vec4 13107, 0, 16;
    %store/vec4 v0x14a21bc00_0, 0, 16;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14a21bd40_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14a21b9b0_0, 0, 1;
    %delay 3330000, 0;
    %vpi_call/w 3 156 "$display", "Debug: Checking internal signals..." {0 0 0};
    %vpi_call/w 3 157 "$display", "  dut.packet_buffer[0] = 0x%02X", v0x14a21a590_0 {0 0 0};
    %vpi_call/w 3 158 "$display", "  dut.tx_packet[127:120] = 0x%02X", &PV<v0x14a21af80_0, 120, 8> {0 0 0};
    %vpi_call/w 3 159 "$display", "  dut.shift_out = 0x%02X", v0x14a21aed0_0 {0 0 0};
    %vpi_call/w 3 160 "$display", "  dut.sdo = %b (cs_n=%b)", v0x14a21ae30_0, v0x14a21b900_0 {0 0 0};
    %vpi_call/w 3 161 "$display", "\000" {0 0 0};
    %vpi_call/w 3 163 "$display", "Expected packet:" {0 0 0};
    %vpi_call/w 3 164 "$display", "  Byte[0]  = 0xAA (header)" {0 0 0};
    %vpi_call/w 3 165 "$display", "  Byte[1]  = 0x12 (quat1_w MSB)" {0 0 0};
    %vpi_call/w 3 166 "$display", "  Byte[2]  = 0x34 (quat1_w LSB)" {0 0 0};
    %vpi_call/w 3 167 "$display", "  Byte[3]  = 0x56 (quat1_x MSB)" {0 0 0};
    %vpi_call/w 3 168 "$display", "  Byte[4]  = 0x78 (quat1_x LSB)" {0 0 0};
    %vpi_call/w 3 169 "$display", "  Byte[5]  = 0x9A (quat1_y MSB)" {0 0 0};
    %vpi_call/w 3 170 "$display", "  Byte[6]  = 0xBC (quat1_y LSB)" {0 0 0};
    %vpi_call/w 3 171 "$display", "  Byte[7]  = 0xDE (quat1_z MSB)" {0 0 0};
    %vpi_call/w 3 172 "$display", "  Byte[8]  = 0xF0 (quat1_z LSB)" {0 0 0};
    %vpi_call/w 3 173 "$display", "  Byte[9]  = 0x11 (gyro1_x MSB)" {0 0 0};
    %vpi_call/w 3 174 "$display", "  Byte[10] = 0x11 (gyro1_x LSB)" {0 0 0};
    %vpi_call/w 3 175 "$display", "  Byte[11] = 0x22 (gyro1_y MSB)" {0 0 0};
    %vpi_call/w 3 176 "$display", "  Byte[12] = 0x22 (gyro1_y LSB)" {0 0 0};
    %vpi_call/w 3 177 "$display", "  Byte[13] = 0x33 (gyro1_z MSB)" {0 0 0};
    %vpi_call/w 3 178 "$display", "  Byte[14] = 0x33 (gyro1_z LSB)" {0 0 0};
    %vpi_call/w 3 179 "$display", "  Byte[15] = 0x03 (flags: both valid)" {0 0 0};
    %vpi_call/w 3 180 "$display", "\000" {0 0 0};
    %vpi_call/w 3 182 "$display", "Reading packet via SPI..." {0 0 0};
    %vpi_call/w 3 183 "$display", "\000" {0 0 0};
    %fork TD_tb_spi_slave_mcu_debug.read_packet, S_0x14a21b500;
    %join;
    %vpi_call/w 3 188 "$display", "\000" {0 0 0};
    %vpi_call/w 3 189 "$display", "Received packet:" {0 0 0};
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x14a21bcb0_0, 0, 32;
T_7.0 ;
    %load/vec4 v0x14a21bcb0_0;
    %cmpi/s 16, 0, 32;
    %jmp/0xz T_7.1, 5;
    %vpi_call/w 3 191 "$display", "  Byte[%2d] = 0x%02X", v0x14a21bcb0_0, &A<v0x14a21c0f0, v0x14a21bcb0_0 > {0 0 0};
    %load/vec4 v0x14a21bcb0_0;
    %addi 1, 0, 32;
    %store/vec4 v0x14a21bcb0_0, 0, 32;
    %jmp T_7.0;
T_7.1 ;
    %vpi_call/w 3 194 "$display", "\000" {0 0 0};
    %vpi_call/w 3 195 "$display", "Verification:" {0 0 0};
    %ix/load 4, 0, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14a21c0f0, 4;
    %cmpi/e 170, 0, 8;
    %jmp/0xz  T_7.2, 4;
    %vpi_call/w 3 199 "$display", "  [PASS] Header byte = 0xAA" {0 0 0};
    %jmp T_7.3;
T_7.2 ;
    %vpi_call/w 3 201 "$display", "  [FAIL] Header byte = 0x%02X (expected 0xAA)", &A<v0x14a21c0f0, 0> {0 0 0};
T_7.3 ;
    %ix/load 4, 1, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14a21c0f0, 4;
    %cmpi/e 18, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_7.6, 4;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14a21c0f0, 4;
    %pushi/vec4 52, 0, 8;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_7.6;
    %flag_set/vec4 8;
    %jmp/0xz  T_7.4, 8;
    %vpi_call/w 3 206 "$display", "  [PASS] Quat W = 0x1234" {0 0 0};
    %jmp T_7.5;
T_7.4 ;
    %vpi_call/w 3 208 "$display", "  [FAIL] Quat W = 0x%02X%02X (expected 0x1234)", &A<v0x14a21c0f0, 1>, &A<v0x14a21c0f0, 2> {0 0 0};
T_7.5 ;
    %ix/load 4, 15, 0;
    %flag_set/imm 4, 0;
    %load/vec4a v0x14a21c0f0, 4;
    %cmpi/e 3, 0, 8;
    %jmp/0xz  T_7.7, 4;
    %vpi_call/w 3 214 "$display", "  [PASS] Flags = 0x03" {0 0 0};
    %jmp T_7.8;
T_7.7 ;
    %vpi_call/w 3 216 "$display", "  [FAIL] Flags = 0x%02X (expected 0x03)", &A<v0x14a21c0f0, 15> {0 0 0};
T_7.8 ;
    %vpi_call/w 3 219 "$display", "\000" {0 0 0};
    %vpi_call/w 3 220 "$display", "========================================" {0 0 0};
    %delay 3330000, 0;
    %vpi_call/w 3 223 "$finish" {0 0 0};
    %end;
    .thread T_7;
# The file index is used to find the file name in the following table.
:file_names 5;
    "N/A";
    "<interactive>";
    "-";
    "tb_spi_slave_mcu_debug.sv";
    "../../fpga/spi_slave_mcu.sv";
